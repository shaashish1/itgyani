var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{j as t,b as a,c as n,a as i,e as r,P as l,u as o,v as c,M as d}from"./ui-vendor-DIe0rKUp.js";import{r as m}from"./react-vendor-BiNvwYUx.js";import{C as u,a as h,c as g,d as x,b as p}from"./card-BHN6H4Dl.js";import{B as f}from"./button-DBOSw5eS.js";import{B as j,C as y,a as v,T as b,u as N,M as w}from"./badge-B9pqSFnC.js";import{c as k,b as S,d as A,u as I,a as C,X as P}from"./index-CP9FtB6T.js";import{L as T,I as F}from"./label-qlLo_hhz.js";import{S as _,a as D,b as R,c as M,d as E,T as G,e as O,E as L}from"./select-5xd5aGZM.js";import{s as B}from"./client-CsrBd3Df.js";import{T as q,a as z,b as $,c as U}from"./tabs-BLUZ-WOo.js";import{P as H}from"./progress-CJhru8ps.js";import{O as V}from"./OptimizedImage-uk7MM_m8.js";import{L as K}from"./lightbulb-DdEzlNHV.js";import{E as Q}from"./eye-DPI2DR6p.js";import{D as W}from"./download-5DDYkonz.js";import{C as J}from"./calendar-DOhHRWYN.js";import{C as Y}from"./clock-0QwdgGYk.js";import{S as X}from"./settings-Ew_PLAXl.js";import{T as Z,S as ee}from"./scroll-area-CPvBptlf.js";import{C as se}from"./chart-column-BbPZuOJr.js";import{S as te,Z as ae}from"./zap-B4NTP1zk.js";import{L as ne}from"./loader-circle-Dm9X4axm.js";import{R as ie}from"./refresh-cw-BkiGTB9D.js";import{F as re}from"./file-text--nDBmKB6.js";import{P as le,T as oe}from"./thumbs-up-D1JuaF16.js";import{C as ce}from"./chevron-right-CcTIKR-y.js";import{S as de}from"./search-pR_-hp65.js";import{S as me}from"./skeleton-Cv_P4-Ak.js";import{D as ue}from"./dollar-sign-CiWGIVmc.js";import{S as he}from"./shield-DU6tM7I1.js";import{L as ge}from"./lock-DV64JbPP.js";import{B as xe}from"./brain-C6MTu4HD.js";import{L as pe}from"./log-out-1tIL8s4f.js";import"./supabase-vendor-Cyo-_BR-.js";import"./chart-vendor-Se2Vi1xL.js";const fe=k("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),je=k("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ye=k("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ve=k("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),be=k("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Ne=k("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),we=k("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),ke=k("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Se=k("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]),Ae=k("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Ie=k("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),Ce=k("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Pe=k("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Te=k("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Fe=k("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),_e=k("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),De=A("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Re=m.forwardRef(({className:e,variant:s,...a},n)=>t.jsx("div",{ref:n,role:"alert",className:S(De({variant:s}),e),...a}));Re.displayName="Alert";const Me=m.forwardRef(({className:e,...s},a)=>t.jsx("h5",{ref:a,className:S("mb-1 font-medium leading-none tracking-tight",e),...s}));Me.displayName="AlertTitle";const Ee=m.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:S("text-sm [&_p]:leading-relaxed",e),...s}));Ee.displayName="AlertDescription";const Ge={enabled:!0,debug:!0,openAI:{baseUrl:"https://api.openai.com/v1",models:{content:"gpt-5-mini-2025-08-07",contentPro:"gpt-5-2025-08-07",contentNano:"gpt-5-nano-2025-08-07",image:"gpt-image-1"},contentGeneration:{maxCompletionTokens:3e3,useStructuredOutput:!0},imageGeneration:{size:"1792x1024",quality:"high",outputFormat:"png",background:"opaque",outputCompression:100},pricing:{gpt5Mini:{input:.1,output:.4},gptImage:{perImage:.04},estimatedCostPerBlog:.2}},openRouter:{deprecated:!0,baseUrl:"https://openrouter.ai/api/v1",apiKey:"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",models:{primary:"anthropic/claude-3.5-sonnet",secondary:"openai/gpt-4o-mini"},frequencyPenalty:.1,presencePenalty:.1},huggingFace:{deprecated:!0,apiKey:"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",imageModels:{primary:"stabilityai/stable-diffusion-xl-base-1.0"}},blog:{minWordCount:800,maxWordCount:2500,targetWordCount:1500,sections:{introduction:!0,mainContent:!0,subheadings:3,conclusion:!0,callToAction:!0},seo:{metaDescription:!0,keywords:!0,tags:!0,slugGeneration:!0,altTextForImages:!0},tone:"professional",audience:"business",includeStatistics:!0,includeCitations:!1,includeExamples:!0},scheduling:{enabled:!0,frequencies:{daily:{interval:"days",count:1},weekly:{interval:"weeks",count:1},biweekly:{interval:"weeks",count:2},monthly:{interval:"months",count:1},custom:{interval:"hours",count:24}},publishing:{autoPublish:!1,draftMode:!0,reviewRequired:!0,timeZone:"UTC",preferredTime:"09:00"},queue:{maxScheduled:30,batchSize:5,retryAttempts:3,retryDelay:3e5}},categories:{"AI/ML":{keywords:["AI","machine learning","automation","digital transformation"],tone:"technical",audience:"business",imageStyle:"Modern tech illustration with neural network patterns, blue and purple gradients, futuristic AI elements, professional and clean"},Automation:{keywords:["process automation","workflow","efficiency","RPA"],tone:"technical",audience:"technical",imageStyle:"Digital workflow illustration showing connected systems, process flow diagrams, efficiency icons, corporate blue theme"},"Quantum Computing":{keywords:["quantum","computing","quantum algorithms","quantum supremacy"],tone:"technical",audience:"technical",imageStyle:"Scientific visualization of quantum particles, abstract quantum circuits, blue and gold color scheme, futuristic lab aesthetic"},"Edge AI":{keywords:["edge computing","distributed AI","IoT","real-time processing"],tone:"technical",audience:"business",imageStyle:"Distributed systems illustration, edge devices network, real-time processing visual, tech-forward design"},"Future Tech":{keywords:["innovation","emerging tech","future","trends"],tone:"professional",audience:"business",imageStyle:"Innovation-focused illustration, cutting-edge technology, forward-thinking design, vibrant colors, inspiring composition"}},quality:{minReadabilityScore:60,maxSentenceLength:25,maxParagraphLength:150,uniquenessCheck:!0,similarityThreshold:.8,factChecking:!1,sourceVerification:!1,profanityFilter:!0,sensitiveContentFilter:!0,brandSafetyCheck:!0},imagePrompts:{templates:{"AI/ML":"Professional blog header image about {topic}. Modern tech illustration with neural network patterns, blue and purple gradients, futuristic AI elements, professional and clean, 16:9 aspect ratio. Ultra high resolution, magazine quality.",Automation:"Professional blog header image about {topic}. Digital workflow illustration showing connected systems, process flow diagrams, efficiency icons, corporate blue theme, 16:9 aspect ratio. Ultra high resolution, magazine quality.","Quantum Computing":"Professional blog header image about {topic}. Scientific visualization of quantum particles, abstract quantum circuits, blue and gold color scheme, futuristic lab aesthetic, 16:9 aspect ratio. Ultra high resolution, magazine quality.","Edge AI":"Professional blog header image about {topic}. Distributed systems illustration, edge devices network, real-time processing visual, tech-forward design, 16:9 aspect ratio. Ultra high resolution, magazine quality.","Future Tech":"Professional blog header image about {topic}. Innovation-focused illustration, cutting-edge technology, forward-thinking design, vibrant colors, inspiring composition, 16:9 aspect ratio. Ultra high resolution, magazine quality.",generic:"Professional blog header illustration about {topic}, modern design, clean composition, business-friendly colors, 16:9 aspect ratio. Ultra high resolution, magazine quality."},styles:{header:"16:9 aspect ratio (1792x1024), blog header, professional, high-quality",inline:"square format (1024x1024), supporting illustration, simple, clear",featured:"ultra high quality (1792x1024), detailed, professional magazine style"}},errorHandling:{maxRetries:3,retryDelay:2e3,exponentialBackoff:!0,timeoutDuration:6e4,imageTimeout:9e4,errorResponses:{rateLimited:"delay",unauthorized:"skip",paymentRequired:"skip",serverError:"retry",contentFiltered:"skip",invalidRequest:"skip"}},storage:{blogDirectory:"/home/itgyani.com/itgyani/src/content/blogs",imageDirectory:"/home/itgyani.com/itgyani/public/images/blogs",draftDirectory:"/home/itgyani.com/itgyani/src/content/drafts",fileNaming:{pattern:"{date}-{slug}",extension:".md",imageFormat:".webp"},backup:{enabled:!0,directory:"/home/itgyani.com/backup/ai-blogs",frequency:"daily",retention:30}}},Oe=()=>{const e={...Ge};return e.debug=!1,e.scheduling.publishing.autoPublish=!1,e},Le=e=>{const s=Oe();return{model:{content:s.openAI.models.content,"high-quality":s.openAI.models.contentPro,fast:s.openAI.models.contentNano,image:s.openAI.models.image,creative:s.openAI.models.content,technical:s.openAI.models.content,budget:s.openAI.models.contentNano}[e],maxCompletionTokens:s.openAI.contentGeneration.maxCompletionTokens,useStructuredOutput:s.openAI.contentGeneration.useStructuredOutput}},Be=new class{constructor(){s(this,"config",Oe()),s(this,"baseUrl",this.config.openRouter.baseUrl),s(this,"apiKey",this.config.openRouter.apiKey)}async generateBlog(e){try{this.log("Starting blog generation",{topic:e.topic,category:e.category});const s=this.getOptimalModel(e),t=this.buildBlogPrompt(e),a=await this.callOpenRouter(t,s);if(!a.success)return a;const n=this.parseGeneratedContent(a.data,e);return this.log("Blog generation completed",{title:n.title,wordCount:n.content.split(" ").length}),{success:!0,data:n,usage:a.usage}}catch(s){return this.log("Blog generation failed",{error:s.message}),{success:!1,error:s.message}}}async generateBlogIdeas(e,s=5){try{const t=this.buildIdeaPrompt(e,s),a=Le("creative"),n=await this.callOpenRouter(t,a);return n.success?{success:!0,data:this.parseGeneratedIdeas(n.data),usage:n.usage}:n}catch(t){return{success:!1,error:t.message}}}async enhanceBlog(e,s){try{const t=this.buildEnhancementPrompt(e,s),a=Le("content");return await this.callOpenRouter(t,a)}catch(t){return{success:!1,error:t.message}}}async callOpenRouter(e,s,t=0){var a,n,i,r;try{const l=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","HTTP-Referer":"https://itgyani.com","X-Title":"ITGYANI AI Blog Generator"},body:JSON.stringify({model:s.model,messages:[{role:"system",content:this.getSystemPrompt()},{role:"user",content:e}],temperature:s.temperature,max_tokens:s.maxTokens,top_p:s.topP,frequency_penalty:this.config.openRouter.frequencyPenalty,presence_penalty:this.config.openRouter.presencePenalty})});if(!l.ok){const n=await l.json().catch(()=>({}));if(429===l.status&&t<this.config.errorHandling.maxRetries)return await this.delay(this.config.errorHandling.retryDelay*(t+1)),this.callOpenRouter(e,s,t+1);throw new Error(`OpenRouter API error: ${l.status} - ${(null==(a=n.error)?void 0:a.message)||"Unknown error"}`)}const o=await l.json();return{success:!0,data:o.choices[0].message.content,usage:{promptTokens:(null==(n=o.usage)?void 0:n.prompt_tokens)||0,completionTokens:(null==(i=o.usage)?void 0:i.completion_tokens)||0,totalTokens:(null==(r=o.usage)?void 0:r.total_tokens)||0,cost:this.calculateCost(o.usage,s.model)}}}catch(l){if(t<this.config.errorHandling.maxRetries)return await this.delay(this.config.errorHandling.retryDelay),this.callOpenRouter(e,s,t+1);throw l}}getOptimalModel(e){const{category:s,tone:t}=e;return Le("technology"===s||"automation"===s||"technical"===t?"technical":"creative"===t?"creative":"content")}buildBlogPrompt(e){const{topic:s,category:t,keywords:a=[],tone:n="professional",audience:i="business",wordCount:r=1500}=e;return`Create a comprehensive, SEO-optimized blog post about "${s}" for the ${t} category.\n\nREQUIREMENTS:\n- Target audience: ${i}\n- Tone: ${n}\n- Word count: ${r} words\n- Include relevant keywords: ${a.join(", ")}\n- SEO optimized with meta description and tags\n- Professional structure with clear headings\n- Include practical examples and actionable insights\n- Add 2-3 relevant image suggestions with descriptions\n\nSTRUCTURE:\n1. Compelling title (60 characters max)\n2. Meta description (150-160 characters)\n3. Introduction (engaging hook)\n4. Main content with subheadings\n5. Practical examples/case studies\n6. Conclusion with key takeaways\n7. Call-to-action\n8. SEO keywords and tags\n\nFORMAT YOUR RESPONSE AS JSON:\n{\n  "title": "Blog post title",\n  "metaDescription": "SEO meta description",\n  "content": "Full blog content in markdown format",\n  "keywords": ["keyword1", "keyword2", "keyword3"],\n  "tags": ["tag1", "tag2", "tag3"],\n  "excerpt": "Brief excerpt for previews",\n  "imagePrompts": ["Image prompt 1", "Image prompt 2", "Image prompt 3"]\n}\n\nFocus on providing genuine value to business professionals seeking ${t} solutions. Include current industry trends and actionable advice.`}buildIdeaPrompt(e,s){return`Generate ${s} engaging blog post ideas related to "${e}".\n\nFor each idea, provide:\n1. Title (compelling and SEO-friendly)\n2. Brief description (2-3 sentences)\n3. Target audience\n4. Key points to cover\n5. Estimated reading time\n\nFORMAT AS JSON:\n{\n  "ideas": [\n    {\n      "title": "Blog title",\n      "description": "Brief description",\n      "audience": "Target audience",\n      "keyPoints": ["Point 1", "Point 2", "Point 3"],\n      "estimatedReadingTime": "5 minutes"\n    }\n  ]\n}\n\nMake the ideas diverse, actionable, and valuable for business professionals.`}buildEnhancementPrompt(e,s){return`Enhance the following blog content based on these instructions: ${s}\n\nORIGINAL CONTENT:\n${e}\n\nENHANCEMENT INSTRUCTIONS:\n${s}\n\nPlease provide the enhanced version while maintaining the original structure and improving based on the specific instructions provided.`}getSystemPrompt(){return"You are an expert content writer for ITGYANI, a leading business automation and AI solutions company. \n\nCRITICAL: All content must comply with Google AdSense policies and guidelines:\n\nCONTENT QUALITY REQUIREMENTS:\n- Create original, high-value content that provides genuine insights\n- Write authoritative, well-researched articles with proper citations\n- Ensure all information is accurate, factual, and up-to-date\n- Focus on educational and informational content\n- Provide actionable business insights and solutions\n\nPROHIBITED CONTENT - NEVER include:\n- Adult content, violence, or inappropriate material\n- Misleading, deceptive, or clickbait content\n- Copyrighted material without proper attribution\n- Spam, low-quality, or automatically generated content\n- Content that promotes illegal activities or harmful behavior\n- Discriminatory or hate speech content\n- Medical advice without proper disclaimers\n- Financial advice without appropriate disclaimers\n\nCONTENT STRUCTURE REQUIREMENTS:\n- Use clear, descriptive headings and subheadings\n- Include proper introduction, body, and conclusion\n- Add value through actionable insights and real-world examples\n- Maintain professional tone throughout\n- Use proper markdown formatting for readability\n- Include relevant, contextual internal and external links\n\nSEO & READABILITY:\n- Write compelling, non-clickbait titles that accurately reflect content\n- Create engaging meta descriptions under 160 characters\n- Use relevant keywords naturally throughout the content\n- Maintain optimal keyword density (1-2%)\n- Write for humans first, search engines second\n- Ensure content is scannable with bullet points and lists\n\nBUSINESS FOCUS:\n- Center content around business automation and AI solutions\n- Highlight practical applications and case studies\n- Address common business challenges and solutions\n- Demonstrate ITGYANI's expertise and thought leadership\n- Include actionable recommendations readers can implement\n\nYour goal is to create premium, Google AdSense-compliant content that establishes ITGYANI as a trusted authority while providing genuine value to business professionals seeking automation and AI solutions."}parseGeneratedContent(e,s){try{const t=JSON.parse(e),a=this.generateSlug(t.title),n=this.calculateReadingTime(t.content);return{title:t.title,slug:a,content:t.content,metaDescription:t.metaDescription,keywords:t.keywords||[],tags:t.tags||[],excerpt:t.excerpt||this.generateExcerpt(t.content),readingTime:n,imagePrompts:t.imagePrompts||[],category:s.category,createdAt:(new Date).toISOString()}}catch(t){return this.log("JSON parsing failed, using fallback parsing",{error:t.message}),{title:this.extractTitle(e)||`Blog about ${s.topic}`,slug:this.generateSlug(s.topic),content:e,metaDescription:this.generateMetaDescription(e),keywords:s.keywords||[],tags:[s.category],excerpt:this.generateExcerpt(e),readingTime:this.calculateReadingTime(e),imagePrompts:[],category:s.category,createdAt:(new Date).toISOString()}}}parseGeneratedIdeas(e){try{return JSON.parse(e)}catch(s){return{ideas:[{title:"Blog Ideas Generation Failed",description:"Unable to parse generated ideas. Please try again.",audience:"General",keyPoints:["Retry generation","Check API response","Review prompt"],estimatedReadingTime:"N/A"}]}}}generateSlug(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}calculateReadingTime(e){const s=e.split(/\s+/).length;return Math.ceil(s/200)}generateExcerpt(e,s=160){const t=e.split(/[.!?]+/);let a="";for(const n of t){if((a+n).length>s)break;a+=n+"."}return a.trim()}extractTitle(e){const s=e.match(/^#\s*(.+)$/m);return s?s[1].trim():null}generateMetaDescription(e){return this.generateExcerpt(e,155).replace(/\n/g," ").trim()}calculateCost(e,s){if(!e)return 0;const t={"anthropic/claude-3.5-sonnet":{input:.003,output:.015},"openai/gpt-4o-mini":{input:15e-5,output:6e-4},"google/gemini-pro":{input:125e-6,output:375e-6},"meta-llama/llama-3.1-8b-instruct":{input:1e-4,output:1e-4},"microsoft/phi-3-mini-128k-instruct":{input:5e-5,output:5e-5}}[s]||{input:.001,output:.002};return e.prompt_tokens*t.input/1e3+e.completion_tokens*t.output/1e3}delay(e){return new Promise(s=>setTimeout(s,e))}log(e,s){this.config.debug}},qe=new class{constructor(){s(this,"config",Ge),s(this,"rateLimitTracker",{requestCount:0,lastReset:new Date,dailyLimit:100})}generateImagePrompt(e,s,t){return`${s}, ${{technology:"modern technology, digital innovation, clean design",business:"professional business environment, corporate setting",automation:"automated systems, robotic processes, efficiency",industry:"industrial processes, manufacturing, innovation",aiStudio:"artificial intelligence, neural networks, futuristic"}[e]||"professional, modern"}, ${{header:"banner style, wide aspect ratio, minimalist",inline:"square format, detailed illustration",featured:"high quality, detailed, professional photography style"}[t]||"professional"}, high quality, 4k resolution`}checkRateLimit(){const e=new Date;return(e.getTime()-this.rateLimitTracker.lastReset.getTime())/36e5>=24&&(this.rateLimitTracker.requestCount=0,this.rateLimitTracker.lastReset=e),this.rateLimitTracker.requestCount<this.rateLimitTracker.dailyLimit}async generateImage(e){try{if(!this.checkRateLimit())return{success:!1,error:"Daily rate limit exceeded for Hugging Face API"};const s=this.generateImagePrompt(e.category,e.prompt,e.style||"realistic"),t=this.config.huggingFace.imageModels.primary,a=`https://api-inference.huggingface.co/models/${t}`,n=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${this.config.huggingFace.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s,parameters:{negative_prompt:"blurry, low quality, distorted, text, watermark",num_inference_steps:20,guidance_scale:7.5,width:512,height:512}})});if(!n.ok){const e=await n.text();throw new Error(`Hugging Face API error: ${n.status} - ${e}`)}const i=await n.blob(),r=URL.createObjectURL(i);return this.rateLimitTracker.requestCount++,{success:!0,data:{url:r,prompt:s,model:t,style:e.style||"realistic",timestamp:new Date}}}catch(s){return{success:!1,error:`Image generation failed: ${s.message}`}}}async generateBlogImages(e,s,t=2){const a=[];try{const n={prompt:`${e} header image`,category:s,style:"realistic",aspectRatio:"16:9"},i=await this.generateImage(n);a.push(i),await new Promise(e=>setTimeout(e,2e3));for(let r=1;r<t;r++){const n={prompt:`${e} illustration ${r}`,category:s,style:"artistic",aspectRatio:"4:3"},i=await this.generateImage(n);a.push(i),r<t-1&&await new Promise(e=>setTimeout(e,2e3))}return a.filter(e=>e.success).length,a}catch(n){for(;a.length<t;)a.push({success:!1,error:`Batch generation failed: ${n.message}`});return a}}async generateFeaturedImage(e,s){const t={prompt:`${e} featured image`,category:s,style:"realistic",aspectRatio:"16:9"};return this.generateImage(t)}async healthCheck(){try{if(!this.config.huggingFace.apiKey)return{success:!1,error:"Hugging Face API key not configured"};const e=this.checkRateLimit(),s=`https://api-inference.huggingface.co/models/${this.config.huggingFace.imageModels.primary}`,t=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${this.config.huggingFace.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:"test image",parameters:{num_inference_steps:1}})}),a=200===t.status||503===t.status;return{success:a,error:a?void 0:`API connectivity test failed: ${t.status}`,info:{modelStatus:200===t.status?"ready":"loading",rateLimitOk:e,requestsToday:this.rateLimitTracker.requestCount,dailyLimit:this.rateLimitTracker.dailyLimit}}}catch(e){return{success:!1,error:`Health check failed: ${e.message}`}}}getUsageStats(){return{requestsToday:this.rateLimitTracker.requestCount,dailyLimit:this.rateLimitTracker.dailyLimit,remainingRequests:Math.max(0,this.rateLimitTracker.dailyLimit-this.rateLimitTracker.requestCount),resetTime:new Date(this.rateLimitTracker.lastReset.getTime()+864e5)}}resetRateLimit(){this.rateLimitTracker.requestCount=0,this.rateLimitTracker.lastReset=new Date}},ze=new class{constructor(){s(this,"SCHEDULE_KEY","itgyani_blog_schedule"),s(this,"STATS_KEY","itgyani_schedule_stats")}getAllScheduled(){try{const e=localStorage.getItem(this.SCHEDULE_KEY);return e?JSON.parse(e).map(e=>({...e,scheduledFor:new Date(e.scheduledFor),createdAt:new Date(e.createdAt),lastAttempt:e.lastAttempt?new Date(e.lastAttempt):void 0})):[]}catch(e){return[]}}saveAllScheduled(e){try{localStorage.setItem(this.SCHEDULE_KEY,JSON.stringify(e)),this.updateStats()}catch(s){}}calculateNextRun(e,s,t){const a=new Date,n=t?new Date(t):a;if(n>a)return n;const i=new Date(n);switch(e){case"daily":i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7);break;case"biweekly":i.setDate(i.getDate()+14);break;case"monthly":i.setMonth(i.getMonth()+1);break;case"custom":if(s)switch(s.interval){case"hours":i.setHours(i.getHours()+s.count);break;case"days":i.setDate(i.getDate()+s.count);break;case"weeks":i.setDate(i.getDate()+7*s.count);break;case"months":i.setMonth(i.getMonth()+s.count)}}return i}scheduleBlog(e){try{const s=this.calculateNextRun(e.frequency,e.customInterval,e.startDate),t={id:`scheduled-${Date.now()}`,topic:e.topic,category:e.category,frequency:e.frequency,scheduledFor:s,status:"scheduled",autoPublish:e.autoPublish,keywords:e.keywords,tone:e.tone,audience:e.audience,generateImages:e.generateImages,createdAt:new Date},a=this.getAllScheduled();return a.push(t),this.saveAllScheduled(a),{success:!0,data:t}}catch(s){return{success:!1,error:`Failed to schedule blog: ${s.message}`}}}getScheduledBlogs(){return this.getAllScheduled()}cancelScheduledBlog(e){try{const s=this.getAllScheduled(),t=s.findIndex(s=>s.id===e);return-1===t?{success:!1,error:"Scheduled blog not found"}:(s.splice(t,1),this.saveAllScheduled(s),{success:!0})}catch(s){return{success:!1,error:`Failed to cancel scheduled blog: ${s.message}`}}}getScheduleStats(){const e=this.getAllScheduled(),s={totalScheduled:e.length,pendingGeneration:e.filter(e=>"scheduled"===e.status).length,generated:e.filter(e=>"generated"===e.status).length,published:e.filter(e=>"published"===e.status).length,failed:e.filter(e=>"failed"===e.status).length,queueHealth:"good",nextScheduled:void 0},t=e.filter(e=>"scheduled"===e.status).sort((e,s)=>e.scheduledFor.getTime()-s.scheduledFor.getTime());t.length>0&&(s.nextScheduled=t[0].scheduledFor);const a=s.totalScheduled>0?s.failed/s.totalScheduled:0;return a>.5?s.queueHealth="error":a>.2&&(s.queueHealth="warning"),s}updateStats(){try{const e=this.getScheduleStats();localStorage.setItem(this.STATS_KEY,JSON.stringify(e))}catch(e){}}async processScheduledBlogs(){try{const s=this.getAllScheduled(),t=new Date,a=s.filter(e=>"scheduled"===e.status&&e.scheduledFor<=t);let n=0,i=0;const r=[];for(const l of a)try{l.status="generating",l.lastAttempt=new Date,await new Promise(e=>setTimeout(e,1e3)),Math.random()>.1?(l.status=l.autoPublish?"published":"generated",n++):(l.status="failed",l.error="Simulated generation failure",i++,r.push(`Failed to generate blog for topic: ${l.topic}`))}catch(e){l.status="failed",l.error=e.message,i++,r.push(`Error processing ${l.topic}: ${e.message}`)}return this.saveAllScheduled(s),{success:!0,data:{processed:a.length,successful:n,failed:i,errors:r.length>0?r:void 0}}}catch(e){return{success:!1,error:`Failed to process scheduled blogs: ${e.message}`}}}updateScheduledBlogStatus(e,s,t,a){try{const n=this.getAllScheduled(),i=n.find(s=>s.id===e);return i?(i.status=s,i.lastAttempt=new Date,t&&(i.error=t),a&&(i.generatedContent=a),this.saveAllScheduled(n),{success:!0}):{success:!1,error:"Scheduled blog not found"}}catch(n){return{success:!1,error:`Failed to update scheduled blog status: ${n.message}`}}}clearAllSchedules(){try{localStorage.removeItem(this.SCHEDULE_KEY),localStorage.removeItem(this.STATS_KEY)}catch(e){}}},$e=({className:e=""})=>{const[s,a]=m.useState("generate"),[n,i]=m.useState(!1),[r,l]=m.useState(null),[o,c]=m.useState([]),[d,v]=m.useState(null),[b,N]=m.useState({topic:"",category:"technology",keywords:"",tone:"professional",audience:"business",wordCount:1500,includeImages:!0}),[w,k]=m.useState({topic:"",category:"technology",frequency:"weekly",customInterval:{interval:"days",count:1},startDate:"",autoPublish:!1,keywords:"",tone:"professional",audience:"business"}),[S,A]=m.useState([]);m.useEffect(()=>{I(),C()},[]);const I=()=>{const e=ze.getScheduledBlogs();c(e)},C=()=>{const e=ze.getScheduleStats();v(e)},P=(e,s)=>{const t={type:e,message:s};A(e=>[...e,t]),setTimeout(()=>{A(e=>e.filter(e=>e!==t))},5e3)},G=e=>{switch(e){case"scheduled":return t.jsx(Y,{className:"h-4 w-4 text-blue-500"});case"generating":return t.jsx(Pe,{className:"h-4 w-4 text-yellow-500 animate-spin"});case"generated":return t.jsx(y,{className:"h-4 w-4 text-green-500"});case"published":return t.jsx(y,{className:"h-4 w-4 text-blue-500"});case"failed":return t.jsx(ve,{className:"h-4 w-4 text-red-500"});default:return t.jsx(je,{className:"h-4 w-4 text-gray-500"})}},O=e=>{switch(e){case"scheduled":default:return"secondary";case"generating":case"generated":case"published":return"default";case"failed":return"destructive"}};return t.jsxs("div",{className:`space-y-6 ${e}`,children:[t.jsx("div",{className:"space-y-2",children:S.map((e,s)=>t.jsxs(Re,{variant:"error"===e.type?"destructive":"default",children:[t.jsx(je,{className:"h-4 w-4"}),t.jsx(Me,{children:"success"===e.type?"Success":"error"===e.type?"Error":"Warning"}),t.jsx(Ee,{children:e.message})]},s))}),t.jsxs(q,{value:s,onValueChange:a,children:[t.jsxs(z,{className:"grid w-full grid-cols-4",children:[t.jsx($,{value:"generate",children:"Generate Blog"}),t.jsx($,{value:"schedule",children:"Schedule Blogs"}),t.jsx($,{value:"manage",children:"Manage Queue"}),t.jsx($,{value:"analytics",children:"Analytics"})]}),t.jsxs(U,{value:"generate",className:"space-y-6",children:[t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(K,{className:"h-5 w-5"}),"Generate Blog Post"]}),t.jsx(x,{children:"Create a single blog post using AI with customizable parameters"})]}),t.jsxs(p,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"topic",children:"Blog Topic *"}),t.jsx(F,{id:"topic",placeholder:"Enter blog topic...",value:b.topic,onChange:e=>N({...b,topic:e.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"category",children:"Category"}),t.jsxs(_,{value:b.category,onValueChange:e=>N({...b,category:e}),children:[t.jsx(D,{children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"technology",children:"Technology"}),t.jsx(E,{value:"business",children:"Business"}),t.jsx(E,{value:"automation",children:"Automation"}),t.jsx(E,{value:"industry",children:"Industry"}),t.jsx(E,{value:"aiStudio",children:"AI Studio"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"tone",children:"Tone"}),t.jsxs(_,{value:b.tone,onValueChange:e=>N({...b,tone:e}),children:[t.jsx(D,{children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"professional",children:"Professional"}),t.jsx(E,{value:"casual",children:"Casual"}),t.jsx(E,{value:"technical",children:"Technical"}),t.jsx(E,{value:"creative",children:"Creative"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"audience",children:"Target Audience"}),t.jsxs(_,{value:b.audience,onValueChange:e=>N({...b,audience:e}),children:[t.jsx(D,{children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"business",children:"Business Professionals"}),t.jsx(E,{value:"technical",children:"Technical Experts"}),t.jsx(E,{value:"general",children:"General Audience"}),t.jsx(E,{value:"academic",children:"Academic"})]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"keywords",children:"Keywords (comma-separated)"}),t.jsx(F,{id:"keywords",placeholder:"AI, automation, digital transformation...",value:b.keywords,onChange:e=>N({...b,keywords:e.target.value})})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"wordCount",children:"Word Count"}),t.jsx(F,{id:"wordCount",type:"number",min:"500",max:"3000",value:b.wordCount,onChange:e=>N({...b,wordCount:parseInt(e.target.value)||1500}),className:"w-32"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:"includeImages",checked:b.includeImages,onChange:e=>N({...b,includeImages:e.target.checked})}),t.jsx(T,{htmlFor:"includeImages",children:"Generate Images"})]})]}),t.jsx(f,{onClick:async()=>{if(b.topic.trim()){i(!0),l(null);try{const e={topic:b.topic,category:b.category,keywords:b.keywords.split(",").map(e=>e.trim()).filter(e=>e),tone:b.tone,audience:b.audience,wordCount:b.wordCount,includeImages:b.includeImages,seoOptimized:!0},s=await Be.generateBlog(e);s.success&&s.data?(l(s.data),P("success","Blog generated successfully!"),b.includeImages&&s.data.imagePrompts.length>0&&await(async e=>{try{const s=(await qe.generateBlogImages(e.title,e.category,Math.min(e.imagePrompts.length,2))).filter(e=>e.success);s.length>0?(P("success",`Generated ${s.length} images for the blog`),l({...e,images:s.map(e=>e.data)})):P("warning","Failed to generate images, but blog content is ready")}catch(s){P("warning",`Image generation failed: ${s.message}`)}})(s.data)):P("error",s.error||"Failed to generate blog")}catch(e){P("error",`Error generating blog: ${e.message}`)}finally{i(!1)}}else P("error","Please enter a topic for the blog post")},disabled:n,className:"w-full",size:"lg",children:n?t.jsxs(t.Fragment,{children:[t.jsx(Pe,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Blog..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Generate Blog Post"]})})]})]}),r&&t.jsxs(u,{children:[t.jsx(h,{children:t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(Q,{className:"h-5 w-5"}),"Generated Blog Preview"]})}),t.jsxs(p,{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold",children:r.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.metaDescription})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:(r.tags||[]).map((e,s)=>t.jsx(j,{variant:"secondary",children:e},s))}),t.jsx("div",{className:"bg-muted/50 p-4 rounded-lg max-h-64 overflow-y-auto",children:t.jsxs("pre",{className:"whitespace-pre-wrap text-sm text-foreground",children:[r.content.substring(0,500),"..."]})}),r.images&&r.images.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"Generated Images:"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:(r.images||[]).map((e,s)=>t.jsx(V,{src:e.url,alt:e.prompt,className:"w-full h-32 object-cover rounded"},s))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(f,{variant:"outline",size:"sm",children:[t.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Edit Content"]}),t.jsxs(f,{variant:"outline",size:"sm",children:[t.jsx(W,{className:"mr-2 h-4 w-4"}),"Download"]}),t.jsxs(f,{size:"sm",children:[t.jsx(y,{className:"mr-2 h-4 w-4"}),"Publish Now"]})]})]})]})]}),t.jsx(U,{value:"schedule",className:"space-y-6",children:t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(J,{className:"h-5 w-5"}),"Schedule Automated Blogs"]}),t.jsx(x,{children:"Set up recurring blog generation with custom schedules"})]}),t.jsxs(p,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"scheduleTopic",children:"Blog Topic *"}),t.jsx(F,{id:"scheduleTopic",placeholder:"Enter topic for scheduled blogs...",value:w.topic,onChange:e=>k({...w,topic:e.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"scheduleCategory",children:"Category"}),t.jsxs(_,{value:w.category,onValueChange:e=>k({...w,category:e}),children:[t.jsx(D,{children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"technology",children:"Technology"}),t.jsx(E,{value:"business",children:"Business"}),t.jsx(E,{value:"automation",children:"Automation"}),t.jsx(E,{value:"industry",children:"Industry"}),t.jsx(E,{value:"aiStudio",children:"AI Studio"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"frequency",children:"Frequency"}),t.jsxs(_,{value:w.frequency,onValueChange:e=>k({...w,frequency:e}),children:[t.jsx(D,{children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"daily",children:"Daily"}),t.jsx(E,{value:"weekly",children:"Weekly"}),t.jsx(E,{value:"biweekly",children:"Bi-weekly"}),t.jsx(E,{value:"monthly",children:"Monthly"}),t.jsx(E,{value:"custom",children:"Custom Interval"})]})]})]}),"custom"===w.frequency&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{children:"Custom Interval"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(F,{type:"number",min:"1",value:w.customInterval.count,onChange:e=>k({...w,customInterval:{...w.customInterval,count:parseInt(e.target.value)||1}}),className:"w-20"}),t.jsxs(_,{value:w.customInterval.interval,onValueChange:e=>k({...w,customInterval:{...w.customInterval,interval:e}}),children:[t.jsx(D,{children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"hours",children:"Hours"}),t.jsx(E,{value:"days",children:"Days"}),t.jsx(E,{value:"weeks",children:"Weeks"}),t.jsx(E,{value:"months",children:"Months"})]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"startDate",children:"Start Date (Optional)"}),t.jsx(F,{id:"startDate",type:"datetime-local",value:w.startDate,onChange:e=>k({...w,startDate:e.target.value})})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:"autoPublish",checked:w.autoPublish,onChange:e=>k({...w,autoPublish:e.target.checked})}),t.jsx(T,{htmlFor:"autoPublish",children:"Auto-publish generated blogs"})]}),t.jsxs(f,{onClick:async()=>{if(w.topic.trim())try{const e={topic:w.topic,category:w.category,frequency:w.frequency,customInterval:"custom"===w.frequency?w.customInterval:void 0,startDate:w.startDate||void 0,autoPublish:w.autoPublish,keywords:w.keywords.split(",").map(e=>e.trim()).filter(e=>e),tone:w.tone,audience:w.audience,generateImages:!0},s=await ze.scheduleBlog(e);s.success?(P("success","Blog scheduled successfully!"),k({...w,topic:""}),I(),C()):P("error",s.error||"Failed to schedule blog")}catch(e){P("error",`Error scheduling blog: ${e.message}`)}else P("error","Please enter a topic for scheduled blog")},className:"w-full",size:"lg",children:[t.jsx(J,{className:"mr-2 h-4 w-4"}),"Schedule Blog Series"]})]})]})}),t.jsxs(U,{value:"manage",className:"space-y-6",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d&&t.jsxs(t.Fragment,{children:[t.jsx(u,{children:t.jsxs(p,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Y,{className:"h-4 w-4 text-blue-500"}),t.jsx("span",{className:"text-sm font-medium",children:"Scheduled"})]}),t.jsx("p",{className:"text-2xl font-bold",children:d.pendingGeneration})]})}),t.jsx(u,{children:t.jsxs(p,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(y,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm font-medium",children:"Generated"})]}),t.jsx("p",{className:"text-2xl font-bold",children:d.generated})]})}),t.jsx(u,{children:t.jsxs(p,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ve,{className:"h-4 w-4 text-red-500"}),t.jsx("span",{className:"text-sm font-medium",children:"Failed"})]}),t.jsx("p",{className:"text-2xl font-bold",children:d.failed})]})})]})}),t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(X,{className:"h-5 w-5"}),"Scheduled Blogs Queue"]}),t.jsx(x,{children:"Manage your scheduled blog generation queue"})]}),t.jsx(p,{children:t.jsx("div",{className:"space-y-4",children:0===o.length?t.jsx("p",{className:"text-center text-gray-500 py-8",children:"No scheduled blogs found"}):(o||[]).map(e=>t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[G(e.status),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium",children:e.topic}),t.jsxs("p",{className:"text-sm text-gray-600",children:[e.category," â€¢ ",new Date(e.scheduledFor).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{variant:O(e.status),children:e.status}),"scheduled"===e.status&&t.jsx(f,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const s=await ze.cancelScheduledBlog(e);s.success?(P("success","Scheduled blog cancelled"),I(),C()):P("error",s.error||"Failed to cancel scheduled blog")}catch(s){P("error",`Error cancelling scheduled blog: ${s.message}`)}})(e.id),children:t.jsx(Z,{className:"h-4 w-4"})}),"generated"===e.status&&t.jsx(f,{variant:"outline",size:"sm",children:t.jsx(Q,{className:"h-4 w-4"})})]})]},e.id))})})]})]}),t.jsx(U,{value:"analytics",className:"space-y-6",children:t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(se,{className:"h-5 w-5"}),"Blog Generation Analytics"]}),t.jsx(x,{children:"Track your AI blog generation performance and costs"})]}),t.jsxs(p,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"Generation Success Rate"}),d&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(H,{value:d.totalScheduled>0?(d.generated+d.published)/d.totalScheduled*100:0}),t.jsxs("p",{className:"text-sm text-gray-600",children:[d.generated+d.published," successful out of ",d.totalScheduled," total"]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"Queue Health"}),d&&t.jsx(j,{variant:"good"===d.queueHealth?"default":"warning"===d.queueHealth?"secondary":"destructive",children:d.queueHealth.toUpperCase()})]})]}),(null==d?void 0:d.nextScheduled)&&t.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Next Scheduled:"})," ",new Date(d.nextScheduled).toLocaleString()]})})]})]})})]})]})};function Ue(){const[e,s]=m.useState("GPT-5 vs Claude Opus 4.1: The Ultimate AI Showdown\nGemini 2.5 Pro: Google's Latest AI Breakthrough\nOpenAI O3 Mini: Revolutionary Reasoning Model Explained\nHow Manus AI is Changing Web Automation Forever\nBuilding AI Agents with OpenManus Framework\nJulian Goldie's Top AI SEO Strategies for 2025\nThe Rise of Chinese AI Super Agents\nDeepSeek V3.1: China's Answer to GPT-5\nAI Coding Competition Winners: What Gemini Achieved\nFuture of AI Automation: Trends to Watch\nAI-Powered Content Creation Tools Comparison\nBest AI Models for Code Generation in 2025\nHow AI is Revolutionizing Digital Marketing\nVoice-Enabled AI Assistants: Local vs Cloud\nPrivacy-First AI: Running Models Locally\nAI Agent Platforms: Comprehensive Guide\nReal-World AI Applications in Business\nAI vs Human: Latest Productivity Studies\nGPT-5 Nano: Speed vs Accuracy Trade-offs\nBuilding Custom AI Workflows with n8n\nAI Image Generation: Stable Diffusion Updates\nText-to-Video AI: Latest Developments\nAI for Customer Service Automation\nSentiment Analysis with Modern AI Models\nAI-Powered Sales Funnel Optimization\nNatural Language Processing Breakthroughs 2025\nAI Ethics and Responsible Development\nOpen Source AI Models: Community Impact\nAI Benchmarks: Understanding Performance Metrics\nFine-Tuning Large Language Models Guide\nAI API Integration Best Practices\nMultimodal AI: Text, Image, and Video Processing\nAI Cost Optimization Strategies\nEnterprise AI Adoption Success Stories\nAI Security: Protecting Against Prompt Injection\nAI Hallucinations: Detection and Prevention\nContext Windows: Why Size Matters in AI\nAI Token Economics and Pricing Models\nRetrieval Augmented Generation (RAG) Explained\nVector Databases for AI Applications\nAI Agent Memory Systems Deep Dive\nBuilding Conversational AI Chatbots\nAI for Data Analysis and Visualization\nPredictive Analytics with Machine Learning\nAI-Driven Business Intelligence Tools\nAutomated Testing with AI Assistance\nAI Code Review and Quality Assurance\nDevOps Automation Using AI\nAI for Cybersecurity Threat Detection\nMachine Learning Operations (MLOps) Best Practices\nAI Model Deployment Strategies\nEdge AI: Running Models on Devices\nAI Hardware: GPUs vs TPUs vs NPUs\nQuantum Computing and AI Integration\nAI in Healthcare: Diagnostic Applications\nAI-Powered Drug Discovery Revolution\nAI for Financial Forecasting\nAlgorithmic Trading with AI Models\nAI in Legal Research and Document Review\nEducational AI: Personalized Learning Systems\nAI for Content Moderation at Scale\nRecommendation Systems with Neural Networks\nAI Music Generation and Composition\nAI Game Development Tools\n3D Asset Generation with AI\nAI Video Editing and Post-Production\nReal-Time Translation with Neural Networks\nAI Accessibility Tools for Disabilities\nEnvironmental AI: Climate Change Solutions\nAI in Agriculture: Precision Farming\nAutonomous Vehicles: Latest AI Advances\nRobotics and AI Integration\nAI for Supply Chain Optimization\nInventory Management with Predictive AI\nAI-Powered Customer Insights\nSentiment Analysis for Brand Monitoring\nAI Email Marketing Automation\nSocial Media AI Analytics Tools\nAI Content Planning and Strategy\nSEO Optimization with AI Tools\nAI Keyword Research Methodologies\nLink Building Automation with AI\nAI for Technical SEO Audits\nVoice Search Optimization Strategies\nAI-Generated FAQ and Support Content\nChatbot Development Frameworks Comparison\nAI Training Data: Quality vs Quantity\nTransfer Learning in Modern AI\nFew-Shot Learning Applications\nZero-Shot Learning Capabilities\nPrompt Engineering Advanced Techniques\nAI Safety and Alignment Research\nConstitutional AI Frameworks\nAI Governance and Regulation Updates\nAI Job Market: Skills in Demand\nFuture of Work with AI Collaboration\nAI Productivity Tools for Professionals\nTime Management AI Applications"),[a,n]=m.useState("professional"),[i,r]=m.useState("intermediate"),[l,o]=m.useState("medium"),[c,d]=m.useState("ai-machine-learning"),[j,v]=m.useState(!1),[b,N]=m.useState(!1),[w,k]=m.useState(0),[S,A]=m.useState(null),C=e.split("\n").filter(e=>e.trim().length>0).length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(te,{className:"h-5 w-5"}),"Batch Blog Generator"]}),t.jsx(x,{children:"Generate multiple AI-powered blog posts at once. Enter one topic per line."})]}),t.jsxs(p,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(T,{htmlFor:"topics",children:["Blog Topics (",C," topics)"]}),t.jsx(f,{onClick:async()=>{N(!0);try{I.info("Fetching latest trending topics with AI...",{duration:3e3});const e=localStorage.getItem("selected_ai_provider")||"openai",t=localStorage.getItem("openai_model_config");let a=t?JSON.parse(t):{contentModel:"auto",maxTokens:2e3,temperature:.8,imageSize:"1024x1024",imageQuality:"high"};const{data:n,error:i}=await B.functions.invoke("generate-daily-news-blogs",{body:{count:50,config:a,topicsOnly:!0}});if(i)throw i;if((null==n?void 0:n.topics)&&n.topics.length>0){const t=n.topics.map(e=>e.title||e.topic||e).join("\n");s(t),I.success(`Loaded ${n.topics.length} fresh trending topics!`,{description:`Based on latest ${"openai"===e?"OpenAI":"openrouter"===e?"OpenRouter":"Gemini"} AI analysis`,duration:5e3})}else I.warning("No topics were generated",{description:"Please try again or enter topics manually"})}catch(e){I.error("Failed to fetch trending topics",{description:e.message||"Please try again or enter topics manually",duration:5e3})}finally{N(!1)}},disabled:b||j,variant:"outline",size:"sm",className:"gap-2",children:b?t.jsxs(t.Fragment,{children:[t.jsx(ne,{className:"h-4 w-4 animate-spin"}),"Fetching Latest..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ie,{className:"h-4 w-4"}),"Refresh with AI"]})})]}),t.jsx(G,{id:"topics",placeholder:"Enter one topic per line...",value:e,onChange:e=>s(e.target.value),rows:12,className:"font-mono text-sm",disabled:j||b}),t.jsx("p",{className:"text-xs text-muted-foreground",children:'Click "Refresh with AI" to auto-generate trending topics based on latest news and trends'})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"category",children:"Category"}),t.jsxs(_,{value:c,onValueChange:d,disabled:j,children:[t.jsx(D,{id:"category",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"ai-machine-learning",children:"AI & Machine Learning"}),t.jsx(E,{value:"automation",children:"Automation"}),t.jsx(E,{value:"n8n-workflows",children:"n8n Workflows"}),t.jsx(E,{value:"quantum-computing",children:"Quantum Computing"}),t.jsx(E,{value:"edge-ai",children:"Edge AI"}),t.jsx(E,{value:"future-tech",children:"Future Tech"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"tone",children:"Tone"}),t.jsxs(_,{value:a,onValueChange:e=>n(e),disabled:j,children:[t.jsx(D,{id:"tone",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"professional",children:"Professional"}),t.jsx(E,{value:"casual",children:"Casual"}),t.jsx(E,{value:"technical",children:"Technical"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"audience",children:"Target Audience"}),t.jsxs(_,{value:i,onValueChange:e=>r(e),disabled:j,children:[t.jsx(D,{id:"audience",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"beginner",children:"Beginner"}),t.jsx(E,{value:"intermediate",children:"Intermediate"}),t.jsx(E,{value:"advanced",children:"Advanced"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"length",children:"Article Length"}),t.jsxs(_,{value:l,onValueChange:e=>o(e),disabled:j,children:[t.jsx(D,{id:"length",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"short",children:"Short (800-1200 words)"}),t.jsx(E,{value:"medium",children:"Medium (1500-2000 words)"}),t.jsx(E,{value:"long",children:"Long (2500-3500 words)"})]})]})]})]}),t.jsx(f,{onClick:async()=>{if(e.trim()){v(!0),k(0),A(null);try{const s=e.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>({topic:e,category:c,keywords:[]}));if(0===s.length)return I.error("No valid topics found"),void v(!1);I.info(`Starting batch generation of ${s.length} blog posts...`,{duration:5e3});const{data:t,error:n}=await B.functions.invoke("generate-blog-batch",{body:{topics:s,tone:a,audience:i,length:l,isPremium:!1,delayBetweenRequests:2e3,adminPassword:"itgyani2025admin"}});if(n)throw n;A(t.results),t.results.successful>0?I.success(`Successfully generated ${t.results.successful} blog posts!`,{description:t.results.failed>0?`${t.results.failed} posts failed to generate`:"All posts generated successfully",duration:1e4}):I.error("No blog posts were generated",{description:"Check the error log below for details",duration:1e4}),k(100)}catch(s){I.error("Failed to generate blog posts",{description:s.message||"Please try again",duration:5e3})}finally{v(!1)}}else I.error("Please enter at least one topic")},disabled:j||0===C,className:"w-full",size:"lg",children:j?t.jsxs(t.Fragment,{children:[t.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating ",C," Posts..."]}):t.jsxs(t.Fragment,{children:[t.jsx(re,{className:"mr-2 h-4 w-4"}),"Generate ",C," Blog Posts"]})}),j&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(H,{value:w,className:"w-full"}),t.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"This may take several minutes. Please don't close this page."})]})]})]}),S&&t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsx(g,{children:"Generation Results"}),t.jsxs(x,{children:[S.successful," successful â€¢ ",S.failed," failed â€¢ ",S.total," total"]})]}),t.jsxs(p,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 p-4 rounded-lg bg-success/10",children:[t.jsx(y,{className:"h-5 w-5 text-success"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",children:S.successful}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Successful"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 p-4 rounded-lg bg-destructive/10",children:[t.jsx(ve,{className:"h-5 w-5 text-destructive"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",children:S.failed}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Failed"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 p-4 rounded-lg bg-primary/10",children:[t.jsx(re,{className:"h-5 w-5 text-primary"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",children:S.total}),t.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]})]})]}),S.posts&&S.posts.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{children:"Generated Posts"}),t.jsx(ee,{className:"h-48 rounded-md border p-4",children:t.jsx("div",{className:"space-y-2",children:S.posts.map((e,s)=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(y,{className:"h-4 w-4 text-success mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("div",{className:"font-medium",children:e.title}),t.jsx("div",{className:"text-muted-foreground text-xs",children:e.topic})]})]},s))})})]}),S.errors&&S.errors.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{className:"text-destructive",children:"Errors"}),t.jsx(ee,{className:"h-32 rounded-md border border-destructive/20 p-4",children:t.jsx("div",{className:"space-y-1",children:S.errors.map((e,s)=>t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(ve,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),t.jsx("div",{className:"text-sm text-destructive",children:e})]},s))})})]})]})]})]})}function He(){const[e,s]=m.useState(!1),[a,n]=m.useState(null),{toast:i}=C();return t.jsx(u,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Process Blog Topics Queue"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate blog posts from pending topics in the queue (processes 10 at a time)"})]}),t.jsx(f,{onClick:async()=>{s(!0),n(null);try{const{data:e,error:s}=await B.functions.invoke("process-blog-topics",{body:{}});if(s)throw s;n({successful:e.successful||0,failed:e.failed||0,total:e.total||0}),i({title:"Processing Complete",description:`Generated ${e.successful} blog posts successfully`})}catch(e){i({title:"Processing Failed",description:e.message||"Failed to process blog topics",variant:"destructive"})}finally{s(!1)}},disabled:e,className:"w-full",children:e?t.jsxs(t.Fragment,{children:[t.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Topics..."]}):t.jsxs(t.Fragment,{children:[t.jsx(le,{className:"mr-2 h-4 w-4"}),"Process Topics Queue"]})}),a&&t.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium",children:"Total Processed:"}),t.jsx("span",{className:"text-sm font-bold",children:a.total})]}),t.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[t.jsxs("span",{className:"text-sm font-medium flex items-center",children:[t.jsx(ye,{className:"mr-1 h-4 w-4"}),"Successful:"]}),t.jsx("span",{className:"text-sm font-bold",children:a.successful})]}),a.failed>0&&t.jsxs("div",{className:"flex items-center justify-between text-red-600",children:[t.jsxs("span",{className:"text-sm font-medium flex items-center",children:[t.jsx(ve,{className:"mr-1 h-4 w-4"}),"Failed:"]}),t.jsx("span",{className:"text-sm font-bold",children:a.failed})]})]})]})})}const Ve=({runId:e})=>{const[s,a]=m.useState([]),[n,i]=m.useState(new Set);m.useEffect(()=>{r();const s=B.channel(`steps-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"blog_generation_steps",filter:`run_id=eq.${e}`},()=>{r()}).subscribe();return()=>{B.removeChannel(s)}},[e]);const r=async()=>{const{data:s}=await B.from("blog_generation_steps").select("*").eq("run_id",e).order("step_number",{ascending:!0});s&&a(s)},l=e=>{switch(e){case"completed":return t.jsx(y,{className:"h-4 w-4 text-green-500"});case"running":return t.jsx(ne,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":return t.jsx(je,{className:"h-4 w-4 text-destructive"});default:return t.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})}},o=e=>{if(!e)return"-";if(e<1e3)return`${e}ms`;const s=Math.floor(e/1e3),t=Math.floor(s/60);return t>0?`${t}m ${s%60}s`:`${s}s`};return 0===s.length?t.jsx(u,{children:t.jsx(p,{className:"py-8 text-center text-muted-foreground",children:"No generation steps tracked yet"})}):t.jsxs(u,{children:[t.jsx(h,{children:t.jsx(g,{className:"text-lg",children:"Generation Steps"})}),t.jsx(p,{children:t.jsx("div",{className:"space-y-2",children:s.map(e=>{const s=n.has(e.step_number),a=e.details&&Object.keys(e.details).length>0;return t.jsx("div",{className:"border rounded-lg p-3 hover:bg-muted/50 transition-colors",children:t.jsxs("div",{className:"flex items-start gap-3 cursor-pointer",onClick:()=>a&&(e=>{const s=new Set(n);s.has(e)?s.delete(e):s.add(e),i(s)})(e.step_number),children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l(e.status)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsxs("span",{className:"font-medium text-sm",children:["Step ",e.step_number,": ",e.step_name]}),(r=e.status,t.jsx(j,{variant:{completed:"default",running:"secondary",failed:"destructive",pending:"outline"}[r]||"outline",className:"ml-2",children:r})),t.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:o(e.duration_ms)})]}),e.error_message&&t.jsxs("div",{className:"mt-1 text-xs text-destructive",children:["Error: ",e.error_message]}),s&&a&&t.jsx("div",{className:"mt-2 p-2 bg-muted rounded text-xs",children:t.jsx("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(e.details,null,2)})})]}),a&&t.jsx("div",{className:"flex-shrink-0",children:s?t.jsx(v,{className:"h-4 w-4 text-muted-foreground"}):t.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})})]})},e.id);var r})})})]})};function Ke({runId:e}){const[s,a]=m.useState([]),[n,i]=m.useState(!0);m.useEffect(()=>{r();const s=B.channel("queue-changes").on("postgres_changes",{event:"*",schema:"public",table:"blog_generation_queue",filter:e?`run_id=eq.${e}`:void 0},e=>{r()}).subscribe(),t=setInterval(r,5e3);return()=>{B.removeChannel(s),clearInterval(t)}},[e]);const r=async()=>{try{let s=B.from("blog_generation_queue").select("*").order("priority",{ascending:!0}).order("created_at",{ascending:!0}).limit(50);e&&(s=s.eq("run_id",e));const{data:t,error:n}=await s;if(n)throw n;a(t||[])}catch(s){}finally{i(!1)}},l={processing:s.filter(e=>"processing"===e.status).length,pending:s.filter(e=>"pending"===e.status).length,completed:s.filter(e=>"completed"===e.status).length,failed:s.filter(e=>"failed"===e.status).length},o=s.length,c=l.completed+l.failed,d=o>0?c/o*100:0,f=s.find(e=>"processing"===e.status),y=s.filter(e=>"pending"===e.status),v=s.filter(e=>"completed"===e.status||"failed"===e.status),b=e=>{switch(e){case 1:return t.jsxs(j,{variant:"destructive",className:"gap-1",children:[t.jsx(be,{className:"h-3 w-3"}),"High"]});case 2:return t.jsxs(j,{variant:"secondary",className:"gap-1",children:[t.jsx(ae,{className:"h-3 w-3"}),"Normal"]});case 3:return t.jsxs(j,{variant:"outline",className:"gap-1",children:[t.jsx(Ie,{className:"h-3 w-3"}),"Low"]})}},N=e=>{switch(e){case"processing":return t.jsx(ne,{className:"h-4 w-4 animate-spin text-primary"});case"pending":return t.jsx(Y,{className:"h-4 w-4 text-muted-foreground"});case"completed":return t.jsx(ye,{className:"h-4 w-4 text-green-500"});case"failed":return t.jsx(ve,{className:"h-4 w-4 text-destructive"});default:return null}};return n?t.jsx(u,{children:t.jsx(p,{className:"pt-6 flex items-center justify-center",children:t.jsx(ne,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):0===s.length?null:t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Live Queue Status"}),l.processing>0&&t.jsxs(j,{variant:"default",className:"gap-2",children:[t.jsx(ne,{className:"h-3 w-3 animate-spin"}),"Processing"]})]}),t.jsx(x,{children:"Real-time blog generation progress"})]}),t.jsxs(p,{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-3 rounded-lg bg-primary/10",children:[t.jsx("div",{className:"text-2xl font-bold text-primary",children:l.processing}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Processing"})]}),t.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted",children:[t.jsx("div",{className:"text-2xl font-bold",children:l.pending}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending"})]}),t.jsxs("div",{className:"text-center p-3 rounded-lg bg-green-500/10",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.completed}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),t.jsxs("div",{className:"text-center p-3 rounded-lg bg-destructive/10",children:[t.jsx("div",{className:"text-2xl font-bold text-destructive",children:l.failed}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Failed"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Overall Progress"}),t.jsxs("span",{className:"font-medium",children:[c," / ",o]})]}),t.jsx(H,{value:d,className:"h-2"})]}),f&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(ne,{className:"h-4 w-4 animate-spin text-primary"}),"Currently Processing"]}),t.jsx("div",{className:"p-4 rounded-lg border-2 border-primary bg-primary/5 animate-pulse",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium truncate",children:f.topic.title}),t.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[f.topic.category," â€¢ Attempt ",f.attempts,"/",f.max_attempts]})]}),b(f.priority)]})})]}),y.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-sm font-medium",children:["Pending (",y.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y.map(e=>t.jsx("div",{className:"p-3 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[N(e.status),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium text-sm truncate",children:e.topic.title}),t.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.topic.category})]})]}),b(e.priority)]})},e.id))})]}),v.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Completed (",v.length,")"]}),t.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-32 overflow-y-auto",children:v.slice(0,10).map(e=>t.jsxs("div",{className:S("p-2 rounded text-xs flex items-center gap-2","completed"===e.status?"bg-green-500/10 text-green-700":"bg-destructive/10 text-destructive"),children:[N(e.status),t.jsx("span",{className:"truncate flex-1",children:e.topic.title}),"failed"===e.status&&e.error_message&&t.jsx("span",{className:"text-xs opacity-70 truncate max-w-xs",title:e.error_message,children:e.error_message})]},e.id))})]})]})]})}const Qe=()=>{const[e,s]=m.useState(!1),[a,n]=m.useState(!1),[i,r]=m.useState([]),[l,o]=m.useState(!0),[c,d]=m.useState(null),[v,N]=m.useState(null),[w,k]=m.useState(new Date),[S,A]=m.useState(null),[I,P]=m.useState(null),[F,G]=m.useState(10),[O,L]=m.useState("2"),[q,z]=m.useState(null),{toast:$}=C();m.useEffect(()=>{H();const s=B.channel("daily-blog-runs-changes").on("postgres_changes",{event:"*",schema:"public",table:"daily_blog_runs"},e=>{H()}).subscribe();let t;const a=i.some(e=>"pending"===e.status),n=i.some(e=>"running"===e.status);return(e||a||n)&&(t=setInterval(()=>{H()},1e4)),()=>{t&&clearInterval(t),S&&clearTimeout(S),B.removeChannel(s)}},[e,i]);const U=async e=>{try{const{data:t}=await B.from("daily_blog_runs").select("*").eq("id",e).single();if(!t)return;const a=Math.floor((Date.now()-new Date(t.created_at).getTime())/6e4),n=t.blogs_created||0;if(0===n&&a>=7)await B.from("daily_blog_runs").update({status:"failed",error_message:"First blog generation exceeded timeout (7 minutes) with no progress"}).eq("id",e),$({title:"âŒ Generation Failed",description:"The first blog took too long to generate. Please check your API configuration and try again.",variant:"destructive"}),d(null),s(!1),S&&clearTimeout(S);else if(n>0)$({title:"âœ… Generation Proceeding",description:`First blog completed! ${n} blog(s) generated so far.`}),S&&(clearTimeout(S),A(null));else if(a>=5&&a<7){$({title:"âš ï¸ Slow Progress",description:"First blog is taking longer than expected. Continuing to monitor..."}),S&&clearTimeout(S);const s=setTimeout(()=>{U(e)},12e4);A(s)}else $({title:"ðŸ”„ Still Processing",description:"First blog is being generated. This can take a few minutes..."})}catch(t){$({title:"Error",description:"Failed to check generation status",variant:"destructive"})}},H=async()=>{try{try{await B.functions.invoke("fix-stuck-daily-blog-runs",{body:{}})}catch(e){}const{data:t,error:a}=await B.from("daily_blog_runs").select("*").order("run_date",{ascending:!1}).limit(10);if(a)throw a;const n=t||[];if(r(n),k(new Date),c&&n.length>0){const e=n.find(e=>e.id===c);if(e&&"running"!==e.status&&"running"===v){const t="completed"===e.status&&0===e.blogs_created&&0===e.blogs_failed?"failed":e.status;$("completed"===t?{title:"âœ… Generation Complete",description:`Successfully generated ${e.blogs_created} blog post(s)`}:"partial"===t?{title:"âš ï¸ Generation Partially Complete",description:`Generated ${e.blogs_created} blog(s), ${e.blogs_failed} failed`,variant:"destructive"}:{title:"âŒ Generation Failed",description:e.error_message||"The generation process did not complete successfully",variant:"destructive"}),d(null),N(null),s(!1),S&&(clearTimeout(S),A(null))}else e&&N(e.status)}if(!c){const e=n.find(e=>"running"===e.status);if(e){d(e.id),N("running"),s(!0);const t=setTimeout(()=>{0===e.blogs_created&&U(e.id)},3e5);A(t)}}}catch(t){}finally{o(!1)}},V=async(e=0)=>{var s;n(!0);try{$({title:"Updating Blog Images",description:"Generating AI images for all blogs without images..."});const{data:t,error:a}=await B.functions.invoke("update-blog-images",{body:{}});if(a){if(a.message.includes("Failed to send a request")&&e<2)return n(!1),await new Promise(e=>setTimeout(e,2e3)),V(e+1);throw a}$({title:"Images Updated!",description:`Successfully updated ${(null==(s=t.results)?void 0:s.successful)||0} blogs with AI-generated images.`}),H()}catch(t){$({title:"Image Update Failed",description:e>=2?"Unable to connect to the server. Please try again in a moment.":t.message||"Failed to update blog images",variant:"destructive"})}finally{n(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(u,{children:[t.jsx(h,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(ae,{className:"h-5 w-5 text-primary"}),"Automated Daily Blog Generation"]}),t.jsx(x,{children:"Automatically generates 10 trending news blogs every day at 6:00 AM UTC"})]}),t.jsxs(j,{variant:"default",className:"flex items-center gap-2",children:[t.jsx(y,{className:"h-4 w-4"}),"Active"]})]})}),t.jsxs(p,{className:"space-y-6",children:[t.jsxs(Re,{children:[t.jsx(Y,{className:"h-4 w-4"}),t.jsx(Me,{children:"Automation Schedule"}),t.jsxs(Ee,{children:["The system automatically generates 10 news-based blog posts daily at ",t.jsx("strong",{children:"6:00 AM UTC"})," (2:00 AM EST). Topics are sourced from trending AI, automation, and technology news. Each blog is published immediately after generation."]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(b,{className:"h-5 w-5 text-primary"}),t.jsx("h4",{className:"font-medium",children:"Trending Topics"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"AI analyzes latest tech news to find trending topics"})]}),t.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Se,{className:"h-5 w-5 text-primary"}),t.jsx("h4",{className:"font-medium",children:"Queue System"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Generates blogs every 10 minutes to avoid rate limits"})]}),t.jsxs("div",{className:"p-4 border rounded-lg bg-muted/50",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(y,{className:"h-5 w-5 text-primary"}),t.jsx("h4",{className:"font-medium",children:"Auto-Publish"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Posts are automatically published (700-1000 words)"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-primary/5 to-primary/10",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium mb-1",children:"Generate & Queue Blogs"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Generate trending AI news topics and queue them for automatic generation (1 blog every 12 seconds). Each blog is published automatically."}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{htmlFor:"blog-count",className:"text-sm font-medium",children:"Number of blogs:"}),t.jsx("input",{id:"blog-count",type:"number",min:"1",max:"20",value:F,onChange:e=>G(Math.max(1,Math.min(20,parseInt(e.target.value)||1))),disabled:e,className:"w-20 px-3 py-1 border rounded-md bg-background text-foreground"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(T,{htmlFor:"priority-select",className:"text-sm font-medium",children:"Priority:"}),t.jsxs(_,{value:O,onValueChange:e=>L(e),disabled:e,children:[t.jsx(D,{id:"priority-select",className:"w-[140px]",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(be,{className:"h-3 w-3 text-destructive"}),"High (Urgent)"]})}),t.jsx(E,{value:"2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ae,{className:"h-3 w-3"}),"Normal"]})}),t.jsx(E,{value:"3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ie,{className:"h-3 w-3"}),"Low"]})})]})]})]})]})]}),t.jsx(f,{onClick:async()=>{s(!0);try{$({title:"Generating Daily Blogs",description:`Creating ${F} blog topics with ${"1"===O?"HIGH":"3"===O?"LOW":"NORMAL"} priority and starting queue processor...`});const{data:e,error:s}=await B.functions.invoke("generate-daily-news-blogs",{body:{count:F,topicsOnly:!0,priority:parseInt(O)}});if(s)throw s;const t=null==e?void 0:e.runId;if(t){z(t);const{error:e}=await B.functions.invoke("queue-runner",{body:{runId:t}});$(e?{title:"âš ï¸ Runner Warning",description:"Queue created but auto-processor may not have started. Use 'Process Queue Now' button.",variant:"destructive"}:{title:"âœ… Queue Processing Started",description:"Topics queued and processing in background. Watch progress below."}),d(t)}await H()}catch(e){$({title:"Error",description:e.message||"Failed to start blog generation",variant:"destructive"})}finally{s(!1)}},disabled:e,className:"btn-hero ml-4",children:e?t.jsxs(t.Fragment,{children:[t.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(le,{className:"mr-2 h-4 w-4"}),"Queue ",F," ",1===F?"Blog":"Blogs"]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-blue-500/5 to-blue-500/10",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-1",children:"Process Queue Now"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manually start the background queue processor for all pending blog items."})]}),t.jsxs(f,{onClick:async()=>{try{$({title:"Starting Queue Processor",description:"Processing all pending items in the background..."});const{error:e}=await B.functions.invoke("queue-runner",{body:{}});if(e)throw e;$({title:"âœ… Processor Started",description:"Queue is being processed. Check Recent Runs for progress."}),H()}catch(e){$({title:"Processor Failed",description:e.message||"Failed to start queue processor",variant:"destructive"})}},disabled:e,variant:"outline",children:[t.jsx(le,{className:"mr-2 h-4 w-4"}),"Process Queue"]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-orange-500/5 to-orange-500/10",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-1",children:"Generate Images for Existing Blogs"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"One-time backfill: Generate AI images for all existing blogs without images."})]}),t.jsx(f,{onClick:()=>V(),disabled:a,variant:"outline",children:a?t.jsxs(t.Fragment,{children:[t.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(le,{className:"mr-2 h-4 w-4"}),"Update Images"]})})]})]})]})]}),q&&t.jsx(Ke,{runId:q}),t.jsxs(u,{children:[t.jsx(h,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(J,{className:"h-5 w-5"}),"Recent Generation Runs"]}),t.jsx(x,{children:"History of automated and manual blog generation runs"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[t.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Last updated: ",w.toLocaleTimeString()]})]})}),t.jsx(p,{children:l?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(ne,{className:"h-8 w-8 animate-spin text-primary"})}):0===i.length?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Se,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:'No generation runs yet. Click "Generate Now" to create your first batch.'})]}):t.jsx("div",{className:"space-y-3",children:i.map(e=>{const a="completed"===e.status&&0===e.blogs_created&&0===e.blogs_failed?"failed":e.status,n="running"===a||"pending"===a,i="failed"===a,r="partial"===a,l="completed"===a&&e.blogs_created>0,o=n?Date.now()-new Date(e.created_at).getTime():0,m=Math.floor(o/6e4),u=Math.floor(o%6e4/1e3),h=e.blogs_created||0,g=(e.blogs_total||10)-h;let x=0;if(n&&h>0&&o>0){const e=o/h;x=Math.ceil(e*g/6e4)}else n&&(x=2*g);return t.jsxs("div",{className:"border rounded-lg hover:bg-muted/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[l?t.jsx(y,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):i?t.jsx(_e,{className:"h-5 w-5 text-destructive flex-shrink-0"}):r?t.jsx(_e,{className:"h-5 w-5 text-orange-500 flex-shrink-0"}):t.jsx(ne,{className:"h-5 w-5 text-blue-500 animate-spin flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium",children:new Date(e.run_date).toLocaleString()}),t.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n?t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"font-medium text-blue-600",children:["ðŸ”„ Generating blog ",e.blogs_created+1,"/",e.blogs_total||10,"..."]}),t.jsxs("p",{className:"text-xs",children:["Elapsed: ",m,"m ",u,"s",m>=5&&0===h&&t.jsx("span",{className:"ml-2 text-orange-500 font-medium animate-pulse",children:"âš ï¸ Checking status..."}),m>=5&&h>0&&t.jsx("span",{className:"ml-2 text-green-600",children:"âœ“ On track"})]}),t.jsxs("p",{className:"text-xs text-purple-600 font-medium",children:["â±ï¸ Est. time left: ~",x,"m",h>0&&t.jsx("span",{className:"ml-1 text-xs text-muted-foreground",children:"(based on current speed)"}),0===h&&t.jsx("span",{className:"ml-1 text-xs text-muted-foreground",children:"(avg. 2min/blog)"})]}),e.blogs_created>0&&t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["âœ“ ",e.blogs_created," completed â€¢ ",g," remaining"]}),t.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:t.jsx("div",{className:"bg-gradient-to-r from-primary to-purple-600 h-1.5 rounded-full transition-all duration-500",style:{width:e.blogs_created/(e.blogs_total||10)*100+"%"}})})]})]}):t.jsxs("p",{children:[e.blogs_created||0," published, ",e.blogs_failed||0," failed"]}),i&&e.error_message&&t.jsx("span",{className:"block text-xs text-destructive mt-1",children:e.error_message})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{variant:l?"default":n?"secondary":r?"outline":"destructive",className:l?"bg-green-500 hover:bg-green-600 flex-shrink-0":n?"bg-blue-500 hover:bg-blue-600 flex-shrink-0":r?"bg-orange-500 hover:bg-orange-600 text-white flex-shrink-0":"flex-shrink-0",children:n?"Generating...":l?"Success":r?"Partial":"Failed"}),n&&m>=3&&t.jsxs(t.Fragment,{children:[t.jsx(f,{size:"sm",variant:"outline",onClick:()=>(async e=>{const{data:s,error:t}=await B.from("daily_blog_runs").select("*").eq("id",e).single();if(t)return void $({title:"Error",description:"Failed to check status",variant:"destructive"});const a=Date.now()-new Date(s.created_at).getTime(),n=Math.floor(a/6e4);"running"===s.status&&n>3&&0===(s.blogs_created||0)?(await B.functions.invoke("kill-daily-blog-run",{body:{runId:e,reason:"Generation stuck - no progress after 3 minutes"}}),$({title:"Generation Failed",description:"Marked as failed due to no progress",variant:"destructive"})):$({title:"Status Updated",description:`Status: ${s.status}, Blogs: ${s.blogs_created||0}`}),await H()})(e.id),className:"flex-shrink-0",children:"Force Refresh"}),t.jsx(f,{size:"sm",variant:"destructive",onClick:()=>(async(e,t="Terminated by admin")=>{try{await B.functions.invoke("kill-daily-blog-run",{body:{runId:e,reason:t}}),$({title:"Run Terminated",description:"The generation run was marked as failed."}),c===e&&(d(null),s(!1)),await H()}catch(a){$({title:"Kill Failed",description:a.message||"Could not terminate run",variant:"destructive"})}})(e.id),className:"flex-shrink-0",children:"Kill Run"})]}),t.jsx(f,{size:"sm",variant:"ghost",onClick:()=>P(I===e.id?null:e.id),className:"flex-shrink-0",children:I===e.id?"Hide Steps":"View Steps"})]})]}),I===e.id&&t.jsx("div",{className:"px-4 pb-4",children:t.jsx(Ve,{runId:e.id})})]},e.id)})})})]}),t.jsxs(u,{children:[t.jsx(h,{children:t.jsx(g,{className:"text-lg",children:"How It Works"})}),t.jsxs(p,{className:"space-y-3 text-sm",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:"1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"AI News Analysis"}),t.jsx("p",{className:"text-muted-foreground",children:"System scans latest AI, automation, and tech news to identify trending topics"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:"2"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Content Generation"}),t.jsx("p",{className:"text-muted-foreground",children:"AI creates 10 comprehensive, SEO-optimized blog posts with proper categorization"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:"3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Auto-Publishing"}),t.jsx("p",{className:"text-muted-foreground",children:"Each post is automatically published immediately after generation, one at a time"})]})]})]})]})]})},We=m.forwardRef(({className:e,...s},a)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:a,className:S("w-full caption-bottom text-sm",e),...s})}));We.displayName="Table";const Je=m.forwardRef(({className:e,...s},a)=>t.jsx("thead",{ref:a,className:S("[&_tr]:border-b",e),...s}));Je.displayName="TableHeader";const Ye=m.forwardRef(({className:e,...s},a)=>t.jsx("tbody",{ref:a,className:S("[&_tr:last-child]:border-0",e),...s}));Ye.displayName="TableBody",m.forwardRef(({className:e,...s},a)=>t.jsx("tfoot",{ref:a,className:S("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";const Xe=m.forwardRef(({className:e,...s},a)=>t.jsx("tr",{ref:a,className:S("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));Xe.displayName="TableRow";const Ze=m.forwardRef(({className:e,...s},a)=>t.jsx("th",{ref:a,className:S("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));Ze.displayName="TableHead";const es=m.forwardRef(({className:e,...s},a)=>t.jsx("td",{ref:a,className:S("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));es.displayName="TableCell",m.forwardRef(({className:e,...s},a)=>t.jsx("caption",{ref:a,className:S("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption";const ss=()=>{const[e,s]=m.useState([]),[a,n]=m.useState(!0),[i,r]=m.useState(""),[l,o]=m.useState("all"),{toast:c}=C();m.useEffect(()=>{d()},[l]);const d=async()=>{try{n(!0);let e=B.from("blog_posts").select("id, title, slug, excerpt, status, created_at, published_at, category_id, featured_image_url, views, likes, reading_time").order("created_at",{ascending:!1}).limit(50);"all"!==l&&(e=e.eq("status",l));const{data:t,error:a}=await e;if(a)throw a;if(t&&t.length>0){const e=[...new Set(t.map(e=>e.category_id).filter(Boolean))];if(e.length>0){const{data:a}=await B.from("categories").select("id, name").in("id",e),n=new Map((null==a?void 0:a.map(e=>[e.id,e.name]))||[]),i=t.map(e=>({...e,category_name:n.get(e.category_id)||"Uncategorized"}));s(i)}else s(t.map(e=>({...e,category_name:"Uncategorized"})))}else s([])}catch(e){c({title:"Error",description:"Failed to load blog posts",variant:"destructive"})}finally{n(!1)}},v=e.filter(e=>{var s;return e.title.toLowerCase().includes(i.toLowerCase())||(null==(s=e.excerpt)?void 0:s.toLowerCase().includes(i.toLowerCase()))}),b={total:e.length,published:e.filter(e=>"published"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,withImages:e.filter(e=>e.featured_image_url).length};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(u,{children:t.jsxs(p,{className:"pt-6",children:[t.jsx("div",{className:"text-2xl font-bold",children:b.total}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Blogs"})]})}),t.jsx(u,{children:t.jsxs(p,{className:"pt-6",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:b.published}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Published"})]})}),t.jsx(u,{children:t.jsxs(p,{className:"pt-6",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:b.draft}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Drafts"})]})}),t.jsx(u,{children:t.jsxs(p,{className:"pt-6",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.withImages}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"With Images"})]})})]}),t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(re,{className:"h-5 w-5"}),"All Blog Posts"]}),t.jsx(x,{children:"Manage all blog posts with publish/unpublish controls"})]})}),t.jsxs("div",{className:"flex gap-4 mt-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(de,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),t.jsx(F,{placeholder:"Search blog posts...",value:i,onChange:e=>r(e.target.value),className:"pl-9"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(f,{variant:"all"===l?"default":"outline",onClick:()=>o("all"),size:"sm",children:"All"}),t.jsx(f,{variant:"draft"===l?"default":"outline",onClick:()=>o("draft"),size:"sm",children:"Drafts"}),t.jsx(f,{variant:"published"===l?"default":"outline",onClick:()=>o("published"),size:"sm",children:"Published"})]})]})]}),t.jsx(p,{children:a?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(ne,{className:"h-8 w-8 animate-spin text-primary"})}):0===v.length?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(re,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No blog posts found."})]}):t.jsxs(We,{children:[t.jsx(Je,{children:t.jsxs(Xe,{children:[t.jsx(Ze,{children:"Title"}),t.jsx(Ze,{children:"Category"}),t.jsx(Ze,{children:"Status"}),t.jsx(Ze,{children:"Image"}),t.jsx(Ze,{children:"Created"}),t.jsx(Ze,{className:"text-right",children:"Actions"})]})}),t.jsx(Ye,{children:v.map(e=>t.jsxs(Xe,{children:[t.jsx(es,{className:"font-medium max-w-xs truncate",children:e.title}),t.jsx(es,{children:t.jsx(j,{variant:"secondary",children:e.category_name||"Uncategorized"})}),t.jsx(es,{children:t.jsxs(j,{variant:"published"===e.status?"default":"secondary",children:["published"===e.status?t.jsx(y,{className:"h-3 w-3 mr-1"}):t.jsx(J,{className:"h-3 w-3 mr-1"}),e.status]})}),t.jsx(es,{children:e.featured_image_url?t.jsx(j,{variant:"outline",className:"bg-green-50 text-green-700",children:"âœ“ Has Image"}):t.jsx(j,{variant:"outline",className:"bg-gray-50 text-gray-500",children:"No Image"})}),t.jsx(es,{children:new Date(e.created_at).toLocaleDateString()}),t.jsx(es,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(f,{variant:"outline",size:"sm",onClick:()=>window.open(`/blog/${e.slug}`,"_blank"),children:t.jsx(Q,{className:"h-4 w-4"})}),"draft"===e.status?t.jsxs(f,{variant:"default",size:"sm",onClick:()=>(async e=>{try{const{error:s}=await B.from("blog_posts").update({status:"published",published_at:(new Date).toISOString()}).eq("id",e);if(s)throw s;c({title:"Success",description:"Blog post published successfully"}),d()}catch(s){c({title:"Error",description:"Failed to publish blog post",variant:"destructive"})}})(e.id),children:[t.jsx(y,{className:"h-4 w-4 mr-1"}),"Publish"]}):t.jsxs(f,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{const{error:s}=await B.from("blog_posts").update({status:"draft",published_at:null}).eq("id",e);if(s)throw s;c({title:"Success",description:"Blog post unpublished successfully"}),d()}catch(s){c({title:"Error",description:"Failed to unpublish blog post",variant:"destructive"})}})(e.id),children:[t.jsx(ve,{className:"h-4 w-4 mr-1"}),"Unpublish"]}),t.jsx(f,{variant:"destructive",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this blog post?"))try{const{error:s}=await B.from("blog_posts").delete().eq("id",e);if(s)throw s;c({title:"Success",description:"Blog post deleted successfully"}),d()}catch(s){c({title:"Error",description:"Failed to delete blog post",variant:"destructive"})}})(e.id),children:t.jsx(Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})};var ts=["PageUp","PageDown"],as=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ns={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},is="Slider",[rs,ls,os]=i(is),[cs,ds]=n(is,[os]),[ms,us]=cs(is),hs=m.forwardRef((e,s)=>{const{name:n,min:i=0,max:l=100,step:o=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[i],value:g,onValueChange:x=()=>{},onValueCommit:p=()=>{},inverted:f=!1,form:j,...y}=e,v=m.useRef(new Set),b=m.useRef(0),N="horizontal"===c?ps:fs,[w=[],k]=a({prop:g,defaultProp:h,onChange:e=>{var s;null==(s=[...v.current][b.current])||s.focus(),x(e)}}),S=m.useRef(w);function A(e,s,{commit:t}={commit:!1}){const a=function(e){return(String(e).split(".")[1]||"").length}(o),n=function(e,s){const t=Math.pow(10,s);return Math.round(e*t)/t}(Math.round((e-i)/o)*o+i,a),r=O(n,[i,l]);k((e=[])=>{const a=function(e=[],s,t){const a=[...e];return a[t]=s,a.sort((e,s)=>e-s)}(e,r,s);if(function(e,s){if(s>0){const t=function(e){return e.slice(0,-1).map((s,t)=>e[t+1]-s)}(e);return Math.min(...t)>=s}return!0}(a,u*o)){b.current=a.indexOf(r);const s=String(a)!==String(e);return s&&t&&p(a),s?a:e}return e})}return t.jsx(ms,{scope:e.__scopeSlider,name:n,disabled:d,min:i,max:l,valueIndexToChangeRef:b,thumbs:v.current,values:w,orientation:c,form:j,children:t.jsx(rs.Provider,{scope:e.__scopeSlider,children:t.jsx(rs.Slot,{scope:e.__scopeSlider,children:t.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,...y,ref:s,onPointerDown:r(y.onPointerDown,()=>{d||(S.current=w)}),min:i,max:l,inverted:f,onSlideStart:d?void 0:function(e){const s=function(e,s){if(1===e.length)return 0;const t=e.map(e=>Math.abs(e-s)),a=Math.min(...t);return t.indexOf(a)}(w,e);A(e,s)},onSlideMove:d?void 0:function(e){A(e,b.current)},onSlideEnd:d?void 0:function(){const e=S.current[b.current];w[b.current]!==e&&p(w)},onHomeKeyDown:()=>!d&&A(i,0,{commit:!0}),onEndKeyDown:()=>!d&&A(l,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:s})=>{if(!d){const t=ts.includes(e.key)||e.shiftKey&&as.includes(e.key)?10:1,a=b.current;A(w[a]+o*t*s,a,{commit:!0})}}})})})})});hs.displayName=is;var[gs,xs]=cs(is,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ps=m.forwardRef((e,s)=>{const{min:a,max:n,dir:i,inverted:r,onSlideStart:l,onSlideMove:d,onSlideEnd:u,onStepKeyDown:h,...g}=e,[x,p]=m.useState(null),f=o(s,e=>p(e)),j=m.useRef(void 0),y=c(i),v="ltr"===y,b=v&&!r||!v&&r;function N(e){const s=j.current||x.getBoundingClientRect(),t=Cs([0,s.width],b?[a,n]:[n,a]);return j.current=s,t(e-s.left)}return t.jsx(gs,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:t.jsx(js,{dir:y,"data-orientation":"horizontal",...g,ref:f,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const s=N(e.clientX);null==l||l(s)},onSlideMove:e=>{const s=N(e.clientX);null==d||d(s)},onSlideEnd:()=>{j.current=void 0,null==u||u()},onStepKeyDown:e=>{const s=ns[b?"from-left":"from-right"].includes(e.key);null==h||h({event:e,direction:s?-1:1})}})})}),fs=m.forwardRef((e,s)=>{const{min:a,max:n,inverted:i,onSlideStart:r,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,h=m.useRef(null),g=o(s,h),x=m.useRef(void 0),p=!i;function f(e){const s=x.current||h.current.getBoundingClientRect(),t=Cs([0,s.height],p?[n,a]:[a,n]);return x.current=s,t(e-s.top)}return t.jsx(gs,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:t.jsx(js,{"data-orientation":"vertical",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const s=f(e.clientY);null==r||r(s)},onSlideMove:e=>{const s=f(e.clientY);null==l||l(s)},onSlideEnd:()=>{x.current=void 0,null==c||c()},onStepKeyDown:e=>{const s=ns[p?"from-bottom":"from-top"].includes(e.key);null==d||d({event:e,direction:s?-1:1})}})})}),js=m.forwardRef((e,s)=>{const{__scopeSlider:a,onSlideStart:n,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:m,...u}=e,h=us(is,a);return t.jsx(l.span,{...u,ref:s,onKeyDown:r(e.onKeyDown,e=>{"Home"===e.key?(c(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):ts.concat(as).includes(e.key)&&(m(e),e.preventDefault())}),onPointerDown:r(e.onPointerDown,e=>{const s=e.target;s.setPointerCapture(e.pointerId),e.preventDefault(),h.thumbs.has(s)?s.focus():n(e)}),onPointerMove:r(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:r(e.onPointerUp,e=>{const s=e.target;s.hasPointerCapture(e.pointerId)&&(s.releasePointerCapture(e.pointerId),o(e))})})}),ys="SliderTrack",vs=m.forwardRef((e,s)=>{const{__scopeSlider:a,...n}=e,i=us(ys,a);return t.jsx(l.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:s})});vs.displayName=ys;var bs="SliderRange",Ns=m.forwardRef((e,s)=>{const{__scopeSlider:a,...n}=e,i=us(bs,a),r=xs(bs,a),c=m.useRef(null),d=o(s,c),u=i.values.length,h=i.values.map(e=>Is(e,i.min,i.max)),g=u>1?Math.min(...h):0,x=100-Math.max(...h);return t.jsx(l.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:d,style:{...e.style,[r.startEdge]:g+"%",[r.endEdge]:x+"%"}})});Ns.displayName=bs;var ws="SliderThumb",ks=m.forwardRef((e,s)=>{const a=ls(e.__scopeSlider),[n,i]=m.useState(null),r=o(s,e=>i(e)),l=m.useMemo(()=>n?a().findIndex(e=>e.ref.current===n):-1,[a,n]);return t.jsx(Ss,{...e,ref:r,index:l})}),Ss=m.forwardRef((e,s)=>{const{__scopeSlider:a,index:n,name:i,...c}=e,u=us(ws,a),h=xs(ws,a),[g,x]=m.useState(null),p=o(s,e=>x(e)),f=!g||u.form||!!g.closest("form"),j=d(g),y=u.values[n],v=void 0===y?0:Is(y,u.min,u.max),b=function(e,s){return s>2?`Value ${e+1} of ${s}`:2===s?["Minimum","Maximum"][e]:void 0}(n,u.values.length),N=null==j?void 0:j[h.size],w=N?function(e,s,t){const a=e/2;return(a-Cs([0,50],[0,a])(s)*t)*t}(N,v,h.direction):0;return m.useEffect(()=>{if(g)return u.thumbs.add(g),()=>{u.thumbs.delete(g)}},[g,u.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${v}% + ${w}px)`},children:[t.jsx(rs.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(l.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":u.min,"aria-valuenow":y,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...c,ref:p,style:void 0===y?{display:"none"}:e.style,onFocus:r(e.onFocus,()=>{u.valueIndexToChangeRef.current=n})})}),f&&t.jsx(As,{name:i??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:y},n)]})});ks.displayName=ws;var As=m.forwardRef(({__scopeSlider:e,value:s,...a},n)=>{const i=m.useRef(null),r=o(i,n),c=N(s);return m.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"value").set;if(c!==s&&a){const t=new Event("input",{bubbles:!0});a.call(e,s),e.dispatchEvent(t)}},[c,s]),t.jsx(l.input,{style:{display:"none"},...a,ref:r,defaultValue:s})});function Is(e,s,t){return O(100/(t-s)*(e-s),[0,100])}function Cs(e,s){return t=>{if(e[0]===e[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(e[1]-e[0]);return s[0]+a*(t-e[0])}}As.displayName="RadioBubbleInput";var Ps=hs,Ts=vs,Fs=Ns,_s=ks;const Ds=m.forwardRef(({className:e,...s},a)=>t.jsxs(Ps,{ref:a,className:S("relative flex w-full touch-none select-none items-center",e),...s,children:[t.jsx(Ts,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:t.jsx(Fs,{className:"absolute h-full bg-primary"})}),t.jsx(_s,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ds.displayName=Ps.displayName;const Rs=()=>{const[e,s]=m.useState(""),[a,n]=m.useState(!1),[i,r]=m.useState(!1),[l,o]=m.useState(!1),[c,d]=m.useState(null),{toast:v}=C(),[b,N]=m.useState({contentModel:"auto",imageModel:"gpt-image-1",maxTokens:3e3,imageSize:"1024x1024",imageQuality:"high",temperature:.7});return m.useEffect(()=>{const e=localStorage.getItem("openai_model_config");if(e)try{N(JSON.parse(e))}catch(s){}},[]),t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(te,{className:"h-5 w-5 text-primary"}),"OpenAI Configuration"]}),t.jsx(x,{children:"Configure OpenAI for advanced blog content and image generation"})]}),t.jsxs(p,{className:"space-y-6",children:[t.jsxs("div",{className:"p-6 border rounded-lg bg-muted/50 space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"openai-key",className:"text-sm font-medium",children:"OpenAI API Key"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Primary AI provider for blog generation. Get your API key from"," ",t.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"OpenAI Platform"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(F,{id:"openai-key",type:l?"text":"password",value:e,onChange:e=>s(e.target.value),placeholder:"Enter OpenAI API key (sk-proj-...)...",className:"pr-10"}),t.jsx(f,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!l),children:l?t.jsx(L,{className:"h-4 w-4"}):t.jsx(Q,{className:"h-4 w-4"})})]}),t.jsxs(f,{onClick:async()=>{if(e.trim()){r(!0),d(null);try{const{data:s,error:t}=await B.functions.invoke("test-openai-connection",{body:{apiKey:e}});if(t)throw t;d({success:s.success,message:s.message,model:s.model}),s.success?v({title:"Connection Successful",description:"OpenAI API is working correctly"}):v({title:"Connection Failed",description:s.message,variant:"destructive"})}catch(s){d({success:!1,message:s.message||"Failed to test connection"}),v({title:"Error",description:s.message||"Failed to test OpenAI connection",variant:"destructive"})}finally{r(!1)}}else v({title:"Error",description:"Please enter an API key first",variant:"destructive"})},disabled:i||!e.trim(),variant:"outline",children:[i?t.jsx(ne,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(y,{className:"h-4 w-4 mr-2"}),i?"Testing...":"Test"]}),t.jsxs(f,{onClick:async()=>{if(e.trim()){n(!0);try{const{data:t,error:a}=await B.functions.invoke("update-openai-key",{body:{apiKey:e}});if(a)throw a;v({title:"Success",description:"OpenAI API key updated successfully"}),s(""),d(null)}catch(t){v({title:"Error",description:t.message||"Failed to update OpenAI API key",variant:"destructive"})}finally{n(!1)}}else v({title:"Error",description:"Please enter a valid API key",variant:"destructive"})},disabled:a||!e.trim(),className:"btn-hero",children:[t.jsx(Te,{className:"h-4 w-4 mr-2"}),a?"Updating...":"Update"]})]})]}),c&&t.jsxs(Re,{variant:c.success?"default":"destructive",children:[c.success?t.jsx(y,{className:"h-4 w-4"}):t.jsx(_e,{className:"h-4 w-4"}),t.jsx(Me,{children:c.success?"Connection Successful":"Connection Failed"}),t.jsxs(Ee,{className:"space-y-1",children:[t.jsx("p",{children:c.message}),c.model&&t.jsxs("p",{className:"font-medium",children:["Model: ",c.model]})]})]}),t.jsxs("div",{className:"pt-4 border-t space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h5",{className:"font-medium text-sm flex items-center gap-2",children:[t.jsx(X,{className:"h-4 w-4"}),"Model Configuration"]}),t.jsxs(f,{onClick:()=>{localStorage.setItem("openai_model_config",JSON.stringify(b)),v({title:"Settings Saved",description:"Model configuration saved successfully"})},size:"sm",variant:"outline",children:[t.jsx(Te,{className:"h-3 w-3 mr-1"}),"Save Settings"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"content-model",className:"text-xs",children:"Content Generation Model"}),t.jsxs(_,{value:b.contentModel,onValueChange:e=>N({...b,contentModel:e}),children:[t.jsx(D,{id:"content-model",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"auto",children:"Auto (Let AI Decide)"}),t.jsx(E,{value:"gpt-5-2025-08-07",children:"GPT-5 (Best Quality)"}),t.jsx(E,{value:"gpt-5-mini-2025-08-07",children:"GPT-5 Mini (Balanced)"}),t.jsx(E,{value:"gpt-5-nano-2025-08-07",children:"GPT-5 Nano (Fast)"}),t.jsx(E,{value:"gpt-4.1-2025-04-14",children:"GPT-4.1 (Reliable)"}),t.jsx(E,{value:"o3-2025-04-16",children:"O3 (Reasoning)"}),t.jsx(E,{value:"o4-mini-2025-04-16",children:"O4 Mini (Fast Reasoning)"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"auto"===b.contentModel?"AI selects optimal model based on task complexity":"Fixed model for all blog generation"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{htmlFor:"max-tokens",className:"text-xs",children:["Max Tokens: ",b.maxTokens]}),t.jsx(Ds,{id:"max-tokens",min:1e3,max:8e3,step:500,value:[b.maxTokens],onValueChange:([e])=>N({...b,maxTokens:e})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Content length (1000-8000)"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{htmlFor:"temperature",className:"text-xs",children:["Creativity: ",b.temperature.toFixed(1)]}),t.jsx(Ds,{id:"temperature",min:0,max:2,step:.1,value:[b.temperature],onValueChange:([e])=>N({...b,temperature:e})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"0 = Focused, 2 = Creative"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"image-model",className:"text-xs",children:"Image Generation Model"}),t.jsxs(_,{value:b.imageModel,onValueChange:e=>N({...b,imageModel:e}),children:[t.jsx(D,{id:"image-model",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"gpt-image-1",children:"GPT Image 1 (High Quality)"}),t.jsx(E,{value:"dall-e-3",children:"DALL-E 3 (Reliable)"}),t.jsx(E,{value:"dall-e-2",children:"DALL-E 2 (Fast)"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"image-size",className:"text-xs",children:"Image Size"}),t.jsxs(_,{value:b.imageSize,onValueChange:e=>N({...b,imageSize:e}),children:[t.jsx(D,{id:"image-size",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"1024x1024",children:"1024x1024 (Square)"}),t.jsx(E,{value:"1024x1536",children:"1024x1536 (Portrait)"}),t.jsx(E,{value:"1536x1024",children:"1536x1024 (Landscape)"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"image-quality",className:"text-xs",children:"Image Quality"}),t.jsxs(_,{value:b.imageQuality,onValueChange:e=>N({...b,imageQuality:e}),children:[t.jsx(D,{id:"image-quality",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"high",children:"High (Premium)"}),t.jsx(E,{value:"medium",children:"Medium (Balanced)"}),t.jsx(E,{value:"low",children:"Low (Fast)"})]})]})]})]})]}),t.jsxs("div",{className:"pt-4 border-t space-y-2",children:[t.jsx("h5",{className:"font-medium text-sm",children:"Features"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"GPT-5 Content Generation"]}),t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"High-Quality Images"]}),t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"Category-Specific Styles"]}),t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"Structured JSON Output"]})]})]})]}),t.jsxs(Re,{children:[t.jsx(Ne,{className:"h-4 w-4"}),t.jsx(Me,{children:"Security Notice"}),t.jsx(Ee,{children:"API keys are stored securely as encrypted secrets. The system uses OpenAI for both content and image generation with automatic retry and fallback logic."})]}),t.jsxs("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[t.jsxs("h5",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[t.jsx(te,{className:"h-4 w-4 text-primary"}),"Cost Estimate"]}),t.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[t.jsx("p",{children:"â€¢ ~$0.14-0.28 per blog post (content + image)"}),t.jsx("p",{children:"â€¢ 10 blogs/day: ~$42-84/month"}),t.jsx("p",{children:"â€¢ Higher quality than free alternatives"})]})]})]})]})},Ms=()=>{const[e,s]=m.useState(""),[a,n]=m.useState(!1),[i,r]=m.useState(!1),[l,o]=m.useState(!1),[c,d]=m.useState(null),{toast:v}=C(),[b,N]=m.useState({contentModel:"auto",maxTokens:3e3,temperature:.7,topP:1,frequencyPenalty:0,presencePenalty:0});return m.useEffect(()=>{const e=localStorage.getItem("openrouter_model_config");if(e)try{N(JSON.parse(e))}catch(s){}},[]),t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(ae,{className:"h-5 w-5 text-primary"}),"OpenRouter Configuration"]}),t.jsx(x,{children:"Access multiple AI models through OpenRouter's unified API"})]}),t.jsxs(p,{className:"space-y-6",children:[t.jsxs("div",{className:"p-6 border rounded-lg bg-muted/50 space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"openrouter-key",className:"text-sm font-medium",children:"OpenRouter API Key"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Access Claude, GPT-4, Gemini and more. Get your API key from"," ",t.jsx("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"OpenRouter Platform"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(F,{id:"openrouter-key",type:l?"text":"password",value:e,onChange:e=>s(e.target.value),placeholder:"Enter OpenRouter API key (sk-or-v1-...)...",className:"pr-10"}),t.jsx(f,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!l),children:l?t.jsx(L,{className:"h-4 w-4"}):t.jsx(Q,{className:"h-4 w-4"})})]}),t.jsxs(f,{onClick:async()=>{var s;if(e.trim()){r(!0),d(null);try{const t=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"ITGyani Blog System"},body:JSON.stringify({model:"anthropic/claude-3.5-sonnet",messages:[{role:"user",content:"Hi"}],max_tokens:10})});if(!t.ok){const e=await t.json();throw new Error((null==(s=e.error)?void 0:s.message)||"Connection failed")}{const e=await t.json();d({success:!0,message:"Connection successful!",model:e.model||"OpenRouter"}),v({title:"Connection Successful",description:"OpenRouter API is working correctly"})}}catch(t){d({success:!1,message:t.message||"Failed to test connection"}),v({title:"Connection Failed",description:t.message||"Failed to test OpenRouter connection",variant:"destructive"})}finally{r(!1)}}else v({title:"Error",description:"Please enter an API key first",variant:"destructive"})},disabled:i||!e.trim(),variant:"outline",children:[i?t.jsx(ne,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(y,{className:"h-4 w-4 mr-2"}),i?"Testing...":"Test"]}),t.jsxs(f,{onClick:async()=>{if(e.trim()){n(!0);try{const{data:t,error:a}=await B.functions.invoke("update-openrouter-key",{body:{apiKey:e}});if(a)throw a;v({title:"Success",description:"OpenRouter API key updated successfully"}),s(""),d(null)}catch(t){v({title:"Error",description:t.message||"Failed to update OpenRouter API key",variant:"destructive"})}finally{n(!1)}}else v({title:"Error",description:"Please enter a valid API key",variant:"destructive"})},disabled:a||!e.trim(),className:"btn-hero",children:[t.jsx(Te,{className:"h-4 w-4 mr-2"}),a?"Updating...":"Update"]})]})]}),c&&t.jsxs(Re,{variant:c.success?"default":"destructive",children:[c.success?t.jsx(y,{className:"h-4 w-4"}):t.jsx(_e,{className:"h-4 w-4"}),t.jsx(Me,{children:c.success?"Connection Successful":"Connection Failed"}),t.jsxs(Ee,{className:"space-y-1",children:[t.jsx("p",{children:c.message}),c.model&&t.jsxs("p",{className:"font-medium",children:["Model: ",c.model]})]})]}),t.jsxs("div",{className:"pt-4 border-t space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h5",{className:"font-medium text-sm flex items-center gap-2",children:[t.jsx(X,{className:"h-4 w-4"}),"Model Configuration"]}),t.jsxs(f,{onClick:()=>{localStorage.setItem("openrouter_model_config",JSON.stringify(b)),v({title:"Settings Saved",description:"OpenRouter model configuration saved successfully"})},size:"sm",variant:"outline",children:[t.jsx(Te,{className:"h-3 w-3 mr-1"}),"Save Settings"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2 md:col-span-2",children:[t.jsx(T,{htmlFor:"or-content-model",className:"text-xs",children:"Content Generation Model"}),t.jsxs(_,{value:b.contentModel,onValueChange:e=>N({...b,contentModel:e}),children:[t.jsx(D,{id:"or-content-model",children:t.jsx(R,{})}),t.jsxs(M,{children:[t.jsx(E,{value:"auto",children:"Auto (Let AI Decide)"}),t.jsx(E,{value:"anthropic/claude-opus-4-1-20250805",children:"Claude Opus 4.1 (Best Quality)"}),t.jsx(E,{value:"anthropic/claude-sonnet-4-20250514",children:"Claude Sonnet 4 (Balanced)"}),t.jsx(E,{value:"anthropic/claude-3.5-sonnet",children:"Claude 3.5 Sonnet (Fast)"}),t.jsx(E,{value:"anthropic/claude-3-7-sonnet-20250219",children:"Claude 3.7 Sonnet (Thinking)"}),t.jsx(E,{value:"openai/gpt-5-2025-08-07",children:"GPT-5 (Best GPT)"}),t.jsx(E,{value:"openai/gpt-4.1-2025-04-14",children:"GPT-4.1 (Reliable)"}),t.jsx(E,{value:"google/gemini-2.5-pro-latest",children:"Gemini 2.5 Pro (Multimodal)"}),t.jsx(E,{value:"google/gemini-2.5-flash",children:"Gemini 2.5 Flash (Fast)"}),t.jsx(E,{value:"meta-llama/llama-3.3-70b-instruct",children:"Llama 3.3 70B (Open)"})]})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"auto"===b.contentModel?"AI selects optimal model based on task complexity":"Fixed model for all blog generation"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{htmlFor:"or-max-tokens",className:"text-xs",children:["Max Tokens: ",b.maxTokens]}),t.jsx(Ds,{id:"or-max-tokens",min:1e3,max:8e3,step:500,value:[b.maxTokens],onValueChange:([e])=>N({...b,maxTokens:e})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Content length (1000-8000)"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{htmlFor:"or-temperature",className:"text-xs",children:["Temperature: ",b.temperature.toFixed(1)]}),t.jsx(Ds,{id:"or-temperature",min:0,max:2,step:.1,value:[b.temperature],onValueChange:([e])=>N({...b,temperature:e})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"0 = Focused, 2 = Creative"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{htmlFor:"or-top-p",className:"text-xs",children:["Top P: ",b.topP.toFixed(2)]}),t.jsx(Ds,{id:"or-top-p",min:0,max:1,step:.05,value:[b.topP],onValueChange:([e])=>N({...b,topP:e})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Nucleus sampling threshold"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{htmlFor:"or-freq-penalty",className:"text-xs",children:["Frequency Penalty: ",b.frequencyPenalty.toFixed(1)]}),t.jsx(Ds,{id:"or-freq-penalty",min:-2,max:2,step:.1,value:[b.frequencyPenalty],onValueChange:([e])=>N({...b,frequencyPenalty:e})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Reduce repetition (-2 to 2)"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(T,{htmlFor:"or-pres-penalty",className:"text-xs",children:["Presence Penalty: ",b.presencePenalty.toFixed(1)]}),t.jsx(Ds,{id:"or-pres-penalty",min:-2,max:2,step:.1,value:[b.presencePenalty],onValueChange:([e])=>N({...b,presencePenalty:e})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Encourage new topics (-2 to 2)"})]})]})]}),t.jsxs("div",{className:"pt-4 border-t space-y-2",children:[t.jsx("h5",{className:"font-medium text-sm",children:"Available Models"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"Claude 4 Family"]}),t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"GPT-5 & GPT-4"]}),t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"Gemini 2.5 Pro/Flash"]}),t.jsxs(j,{variant:"secondary",className:"justify-start",children:[t.jsx(y,{className:"h-3 w-3 mr-1"}),"Llama 3.3 (Open Source)"]})]})]})]}),t.jsxs(Re,{children:[t.jsx(Ne,{className:"h-4 w-4"}),t.jsx(Me,{children:"Security Notice"}),t.jsx(Ee,{children:"API keys are stored securely as encrypted secrets. OpenRouter provides access to multiple AI providers through a single unified API."})]}),t.jsxs("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[t.jsxs("h5",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[t.jsx(ae,{className:"h-4 w-4 text-primary"}),"Cost Estimate"]}),t.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[t.jsx("p",{children:"â€¢ Variable pricing based on selected model"}),t.jsx("p",{children:"â€¢ Claude models: ~$0.003-0.015 per 1K tokens"}),t.jsx("p",{children:"â€¢ GPT models: ~$0.002-0.010 per 1K tokens"}),t.jsx("p",{children:"â€¢ Competitive pricing with pay-as-you-go"})]})]})]})]})},Es=()=>{const[e,s]=m.useState(null),[a,n]=m.useState(!0),{toast:i}=C();m.useEffect(()=>{r()},[]);const r=async()=>{try{n(!0);const{data:e,error:t}=await B.from("blog_posts").select("id, title, views, likes, reading_time, category_id, created_at");if(t)throw t;const a=[...new Set((null==e?void 0:e.map(e=>e.category_id).filter(Boolean))||[])],{data:i}=await B.from("categories").select("id, name").in("id",a),r=new Map((null==i?void 0:i.map(e=>[e.id,e.name]))||[]),{data:l,error:o}=await B.from("ai_generation_logs").select("tokens_used, created_at, status").eq("status","success");if(o)throw o;const c=(null==e?void 0:e.reduce((e,s)=>e+(s.views||0),0))||0,d=(null==e?void 0:e.reduce((e,s)=>e+(s.likes||0),0))||0,m=(null==e?void 0:e.filter(e=>null!==e.views).length)||0,u=(null==e?void 0:e.reduce((e,s)=>e+(s.reading_time||0),0))/((null==e?void 0:e.length)||1),h=((null==l?void 0:l.reduce((e,s)=>e+(s.tokens_used||0),0))||0)/1e3*.01,g=h/(m||1),x=(null==e?void 0:e.map(e=>({id:e.id,title:e.title,views:e.views||0,likes:e.likes||0,category:r.get(e.category_id)||"General",engagement:(e.views||0)+5*(e.likes||0)})).sort((e,s)=>s.engagement-e.engagement).slice(0,10))||[],p=Array.from((null==e?void 0:e.reduce((e,s)=>{const t=r.get(s.category_id)||"General";e.has(t)||e.set(t,{category:t,count:0,views:0});const a=e.get(t);return a.count++,a.views+=s.views||0,e},new Map))||new Map).map(([e,s])=>({...s,avgViews:s.views/s.count})).sort((e,s)=>s.views-e.views),f=new Date;f.setDate(f.getDate()-7);const j=(null==l?void 0:l.filter(e=>new Date(e.created_at)>=f))||[],y=(null==e?void 0:e.filter(e=>new Date(e.created_at)>=f))||[],v=Array.from({length:7},(e,s)=>{const t=new Date;t.setDate(t.getDate()-(6-s));const a=t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),n=y.filter(e=>new Date(e.created_at).toDateString()===t.toDateString()),i=j.filter(e=>new Date(e.created_at).toDateString()===t.toDateString()).reduce((e,s)=>e+(s.tokens_used||0),0);return{date:a,blogs:n.length,cost:i/1e3*.01,tokens:i}});s({totalViews:c,totalLikes:d,totalBlogs:(null==e?void 0:e.length)||0,publishedBlogs:m,avgReadingTime:u,totalCost:h,avgCostPerBlog:g,topBlogs:x,categoryStats:p,recentGeneration:v})}catch(e){i({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{n(!1)}};if(a)return t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>t.jsxs(u,{children:[t.jsx(h,{className:"pb-2",children:t.jsx(me,{className:"h-4 w-24"})}),t.jsx(p,{children:t.jsx(me,{className:"h-8 w-32"})})]},e))})});if(!e)return null;const l=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs(u,{className:"border-blue-200/50 bg-gradient-to-br from-blue-50/50 to-background dark:from-blue-950/20",children:[t.jsx(h,{className:"pb-2",children:t.jsxs(g,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(Q,{className:"h-4 w-4 text-blue-500"}),"Total Views"]})}),t.jsxs(p,{children:[t.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:e.totalViews.toLocaleString()}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Across ",e.publishedBlogs," blogs"]})]})]}),t.jsxs(u,{className:"border-purple-200/50 bg-gradient-to-br from-purple-50/50 to-background dark:from-purple-950/20",children:[t.jsx(h,{className:"pb-2",children:t.jsxs(g,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(oe,{className:"h-4 w-4 text-purple-500"}),"Total Likes"]})}),t.jsxs(p,{children:[t.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:e.totalLikes.toLocaleString()}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(e.totalLikes/e.totalViews*100).toFixed(1),"% engagement rate"]})]})]}),t.jsxs(u,{className:"border-green-200/50 bg-gradient-to-br from-green-50/50 to-background dark:from-green-950/20",children:[t.jsx(h,{className:"pb-2",children:t.jsxs(g,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(ue,{className:"h-4 w-4 text-green-500"}),"Total Cost"]})}),t.jsxs(p,{children:[t.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:l(e.totalCost)}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l(e.avgCostPerBlog)," per blog"]})]})]}),t.jsxs(u,{className:"border-orange-200/50 bg-gradient-to-br from-orange-50/50 to-background dark:from-orange-950/20",children:[t.jsx(h,{className:"pb-2",children:t.jsxs(g,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(Y,{className:"h-4 w-4 text-orange-500"}),"Avg Reading Time"]})}),t.jsxs(p,{children:[t.jsxs("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:[e.avgReadingTime.toFixed(1)," min"]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.totalBlogs," total blogs"]})]})]})]}),t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(fe,{className:"h-5 w-5"}),"Last 7 Days Activity"]}),t.jsx(x,{children:"Blog generation and cost tracking"})]}),t.jsx(p,{children:t.jsx("div",{className:"space-y-3",children:e.recentGeneration.map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(j,{variant:"outline",children:e.date}),t.jsxs("span",{className:"text-sm",children:[e.blogs," ",1===e.blogs?"blog":"blogs"]})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[t.jsxs("span",{children:[e.tokens.toLocaleString()," tokens"]}),t.jsx("span",{className:"font-medium text-foreground",children:l(e.cost)})]})]},s))})})]}),t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(b,{className:"h-5 w-5"}),"Top Performing Blogs"]}),t.jsx(x,{children:"Based on views and engagement"})]}),t.jsx(p,{children:t.jsxs(We,{children:[t.jsx(Je,{children:t.jsxs(Xe,{children:[t.jsx(Ze,{children:"Title"}),t.jsx(Ze,{children:"Category"}),t.jsx(Ze,{className:"text-right",children:"Views"}),t.jsx(Ze,{className:"text-right",children:"Likes"}),t.jsx(Ze,{className:"text-right",children:"Engagement"})]})}),t.jsx(Ye,{children:e.topBlogs.map((e,s)=>t.jsxs(Xe,{children:[t.jsx(es,{className:"font-medium max-w-md truncate",children:t.jsxs("div",{className:"flex items-center gap-2",children:[s<3&&t.jsx(j,{variant:"secondary",className:"h-5 w-5 p-0 flex items-center justify-center",children:s+1}),e.title]})}),t.jsx(es,{children:t.jsx(j,{variant:"outline",children:e.category})}),t.jsx(es,{className:"text-right",children:e.views.toLocaleString()}),t.jsx(es,{className:"text-right",children:e.likes.toLocaleString()}),t.jsx(es,{className:"text-right font-medium",children:e.engagement.toLocaleString()})]},e.id))})]})})]}),t.jsxs(u,{children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(se,{className:"h-5 w-5"}),"Category Performance"]}),t.jsx(x,{children:"Views and blog count by category"})]}),t.jsx(p,{children:t.jsx("div",{className:"space-y-4",children:e.categoryStats.map((s,a)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx(j,{variant:"outline",children:s.category}),t.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-purple-600",style:{width:s.views/e.categoryStats[0].views*100+"%"}})})]}),t.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[t.jsxs("span",{className:"text-muted-foreground",children:[s.count," posts"]}),t.jsxs("span",{className:"font-medium",children:[s.views.toLocaleString()," views"]}),t.jsxs("span",{className:"text-muted-foreground",children:[s.avgViews.toFixed(0)," avg"]})]})]},a))})})]})]})},Gs=()=>{var e,s;const[a,n]=m.useState(()=>"true"===localStorage.getItem("adminAuthenticated")),[i,r]=m.useState(""),[l,o]=m.useState(""),[c,d]=m.useState(""),[v,b]=m.useState(""),[N,k]=m.useState(!1),[S,A]=m.useState(!1),[I,G]=m.useState(!1),[O,q]=m.useState(!1),[z,$]=m.useState(()=>localStorage.getItem("selected_ai_provider")||"openai"),[U,H]=m.useState("analytics"),[V,K]=m.useState(!0),{toast:W}=C(),J=()=>{"itgyani2025admin"===i?(n(!0),localStorage.setItem("adminAuthenticated","true"),o("")):o("Invalid admin password")};if(!a)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-accent/20 py-12 px-4",children:t.jsx("div",{className:"container mx-auto max-w-md",children:t.jsxs(u,{className:"glass-card",children:[t.jsxs(h,{className:"text-center",children:[t.jsx("div",{className:"flex justify-center mb-4",children:t.jsx(he,{className:"h-16 w-16 text-primary"})}),t.jsx(g,{className:"text-2xl",children:"Admin Access Required"}),t.jsx(x,{children:"Enter admin credentials to access the AI Blog Management system"})]}),t.jsxs(p,{className:"space-y-4",children:[l&&t.jsxs(Re,{variant:"destructive",children:[t.jsx(_e,{className:"h-4 w-4"}),t.jsx(Me,{children:"Authentication Failed"}),t.jsx(Ee,{children:l})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Admin Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"password",value:i,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&J(),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/50 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter admin password..."}),t.jsx(ge,{className:"absolute right-3 top-2.5 h-4 w-4 text-muted-foreground"})]})]}),t.jsxs(f,{onClick:J,className:"w-full btn-hero",children:[t.jsx(he,{className:"mr-2 h-4 w-4"}),"Access Admin Panel"]}),t.jsx("div",{className:"text-center text-sm text-muted-foreground",children:t.jsx("p",{children:"This is a protected area for authorized personnel only."})})]})]})})});const Y=[{id:"analytics",label:"Analytics",icon:ke,description:"Performance & insights"},{id:"daily-automation",label:"Daily Automation",icon:ae,description:"Automated blog generation"},{id:"all-blogs",label:"All Blogs",icon:re,description:"View all blog posts"},{id:"blog-manager",label:"Manual Editor",icon:Ae,description:"Create & edit posts"},{id:"batch-generator",label:"Batch Generator",icon:we,description:"Generate multiple blogs"},{id:"system-settings",label:"AI Settings",icon:X,description:"Configure AI providers"}];return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30 dark:from-slate-950 dark:via-blue-950/20 dark:to-purple-950/20",children:t.jsxs("div",{className:"flex h-screen overflow-hidden",children:[t.jsxs("aside",{className:(V?"w-72":"w-20")+" bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-r border-border/50 flex flex-col transition-all duration-300 ease-in-out",children:[t.jsx("div",{className:"p-6 border-b border-border/50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[V&&t.jsxs("div",{className:"flex items-center gap-3 animate-fade-in",children:[t.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center",children:t.jsx(xe,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"font-bold text-lg gradient-text",children:"AI Admin"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Blog Manager"})]})]}),t.jsx(f,{variant:"ghost",size:"icon",onClick:()=>K(!V),className:"hover:bg-primary/10",children:V?t.jsx(P,{className:"h-4 w-4"}):t.jsx(w,{className:"h-4 w-4"})})]})}),V&&t.jsxs("div",{className:"px-4 py-3 bg-gradient-to-br from-primary/5 to-purple-500/5 m-4 rounded-xl border border-primary/10 animate-fade-in",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(te,{className:"h-4 w-4 text-primary"}),t.jsx("span",{className:"text-xs font-semibold text-muted-foreground",children:"Active Provider"})]}),t.jsxs(_,{value:z,onValueChange:e=>{$(e),localStorage.setItem("selected_ai_provider",e),W({title:"AI Provider Updated",description:`Now using ${"openai"===e?"OpenAI":"openrouter"===e?"OpenRouter":"Gemini"} for blog generation`})},children:[t.jsx(D,{className:"w-full h-9 text-sm bg-background/50",children:t.jsx(R,{})}),t.jsxs(M,{className:"bg-background z-50",children:[t.jsx(E,{value:"openai",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ae,{className:"h-3 w-3 text-blue-500"}),t.jsx("span",{className:"text-sm",children:"OpenAI GPT-5"})]})}),t.jsx(E,{value:"openrouter",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-3 w-3 text-purple-500"}),t.jsx("span",{className:"text-sm",children:"OpenRouter"})]})}),t.jsx(E,{value:"gemini",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(te,{className:"h-3 w-3 text-orange-500"}),t.jsx("span",{className:"text-sm",children:"Gemini"})]})})]})]})]}),t.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:Y.map(e=>{const s=e.icon,a=U===e.id;return t.jsxs("button",{onClick:()=>H(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group "+(a?"bg-gradient-to-r from-primary to-purple-600 text-white shadow-lg shadow-primary/20":"hover:bg-muted/50 text-muted-foreground hover:text-foreground"),children:[t.jsx(s,{className:"h-5 w-5 flex-shrink-0 "+(a?"text-white":"group-hover:text-primary")}),V&&t.jsxs("div",{className:"flex-1 text-left animate-fade-in",children:[t.jsx("p",{className:"text-sm font-medium "+(a?"text-white":""),children:e.label}),!a&&t.jsx("p",{className:"text-xs text-muted-foreground group-hover:text-foreground/70",children:e.description})]})]},e.id)})}),t.jsx("div",{className:"p-4 border-t border-border/50",children:t.jsxs("div",{className:"flex items-center gap-3 "+(V?"justify-between":"justify-center"),children:[V&&t.jsxs("div",{className:"flex items-center gap-3 animate-fade-in",children:[t.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-green-400 to-emerald-600 flex items-center justify-center",children:t.jsx(y,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Admin"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Authenticated"})]})]}),t.jsxs(f,{variant:"ghost",size:V?"sm":"icon",onClick:()=>{n(!1),localStorage.removeItem("adminAuthenticated")},className:"hover:bg-destructive/10 hover:text-destructive",children:[t.jsx(pe,{className:"h-4 w-4"}),V&&t.jsx("span",{className:"ml-2",children:"Sign Out"})]})]})})]}),t.jsxs("main",{className:"flex-1 overflow-y-auto",children:[t.jsx("header",{className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl border-b border-border/50 sticky top-0 z-10",children:t.jsx("div",{className:"px-8 py-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold gradient-text mb-1",children:null==(e=Y.find(e=>e.id===U))?void 0:e.label}),t.jsx("p",{className:"text-sm text-muted-foreground",children:null==(s=Y.find(e=>e.id===U))?void 0:s.description})]}),t.jsxs(j,{variant:"default",className:"flex items-center gap-2 px-4 py-2",children:[t.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"System Active"]})]})})}),t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:["analytics"===U&&t.jsx(Es,{}),"daily-automation"===U&&t.jsx(Qe,{}),"all-blogs"===U&&t.jsx(ss,{}),"blog-manager"===U&&t.jsx($e,{className:"space-y-6"}),"batch-generator"===U&&t.jsxs("div",{className:"space-y-6",children:[t.jsx(He,{}),t.jsx(Ue,{})]}),"system-settings"===U&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs(Re,{className:"border-primary/20 bg-primary/5",children:[t.jsx(te,{className:"h-4 w-4 text-primary"}),t.jsxs(Me,{children:["Active AI Provider: ","openai"===z?"OpenAI":"openrouter"===z?"OpenRouter":"Gemini"]}),t.jsxs(Ee,{children:["Configure settings for ","openai"===z?"OpenAI GPT-5":"openrouter"===z?"OpenRouter":"Google Gemini",". Switch providers using the dropdown above to configure different AI services."]})]}),"openai"===z&&t.jsx(Rs,{}),"openrouter"===z&&t.jsx(Ms,{}),"gemini"===z&&t.jsxs(u,{className:"border-orange-200/50",children:[t.jsxs(h,{children:[t.jsxs(g,{className:"flex items-center gap-2",children:[t.jsx(te,{className:"h-5 w-5 text-orange-500"}),"Google Gemini (Legacy Provider)"]}),t.jsx(x,{children:"Legacy Gemini configuration - Consider upgrading to OpenAI or OpenRouter for better quality and features"})]}),t.jsxs(p,{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ne,{className:"h-5 w-5 text-orange-500"}),t.jsx("h4",{className:"font-medium text-lg",children:"Gemini API Key"})]}),t.jsxs("div",{className:"p-6 border rounded-lg bg-muted/50 space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(T,{htmlFor:"gemini-key",className:"text-sm font-medium",children:"Google Gemini API Key"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Legacy AI provider. Get your API key from"," ",t.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Google AI Studio"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(F,{id:"gemini-key",type:I?"text":"password",value:c,onChange:e=>d(e.target.value),placeholder:"Enter Gemini API key (starts with AI...)...",className:"pr-10"}),t.jsx(f,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>G(!I),children:I?t.jsx(L,{className:"h-4 w-4"}):t.jsx(Q,{className:"h-4 w-4"})})]}),t.jsxs(f,{onClick:async()=>{if(c.trim()){k(!0);try{const{data:e,error:s}=await B.functions.invoke("update-gemini-key",{body:{apiKey:c}});if(s)throw s;W({title:"Success",description:"Gemini API key updated successfully"}),d("")}catch(e){W({title:"Error",description:e.message||"Failed to update Gemini API key",variant:"destructive"})}finally{k(!1)}}else W({title:"Error",description:"Please enter a valid API key",variant:"destructive"})},disabled:N||!c.trim(),className:"btn-hero",children:[t.jsx(Te,{className:"h-4 w-4 mr-2"}),N?"Updating...":"Update"]})]})]}),t.jsxs("div",{className:"pt-4 border-t space-y-2",children:[t.jsx("h5",{className:"font-medium text-sm",children:"Model Information"}),t.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[t.jsxs("p",{children:["â€¢ Current Model: ",t.jsx("span",{className:"font-medium",children:"gemini-1.5-flash-latest"})]}),t.jsx("p",{children:"â€¢ Free tier: 15 requests/minute"}),t.jsx("p",{children:"â€¢ Best for: Fast, cost-effective generation"})]})]})]})]}),t.jsxs(Re,{children:[t.jsx(_e,{className:"h-4 w-4"}),t.jsx(Me,{children:"Security Notice"}),t.jsx(Ee,{children:"API keys are stored securely as encrypted secrets. Gemini is a legacy provider - consider upgrading to OpenAI or OpenRouter."})]})]})]})]})]})})]})]})})};export{Gs as default};
