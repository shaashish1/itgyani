import{j as s}from"./ui-vendor-DIe0rKUp.js";import{r as e,i as r}from"./react-vendor-BiNvwYUx.js";import{s as a}from"./client-CsrBd3Df.js";import{B as t}from"./button-myd0VjqM.js";import{L as i,I as o}from"./label-BNBLft3j.js";import{C as n,a as d,c,d as l,b as m}from"./card-Dt0J8y-5.js";import{t as p}from"./index-BOTiMg6N.js";import{L as u}from"./lock-CTzvbgf5.js";import{L as h}from"./loader-circle-C4jDL6fN.js";import"./supabase-vendor-Cyo-_BR-.js";import"./chart-vendor-Se2Vi1xL.js";const w=()=>{const[w,j]=e.useState(!1),[f,x]=e.useState(""),[v,g]=e.useState(""),y=r();return e.useEffect(()=>{(async()=>{const{data:{session:s}}=await a.auth.getSession();s||(p({title:"Invalid or expired link",description:"Please request a new password reset link.",variant:"destructive"}),y("/auth"))})()},[y]),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs(n,{children:[s.jsxs(d,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:s.jsx(u,{className:"h-8 w-8 text-primary"})})}),s.jsx(c,{children:"Reset Your Password"}),s.jsx(l,{children:"Enter your new password below"})]}),s.jsx(m,{children:s.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),f===v)if(f.length<6)p({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});else{j(!0);try{const{error:s}=await a.auth.updateUser({password:f});s?p({title:"Password reset failed",description:s.message,variant:"destructive"}):(p({title:"Password updated successfully!",description:"You can now sign in with your new password."}),y("/auth"))}catch(e){p({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{j(!1)}}else p({title:"Passwords don't match",description:"Please make sure both passwords are identical.",variant:"destructive"})},className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(i,{htmlFor:"new-password",children:"New Password"}),s.jsx(o,{id:"new-password",type:"password",placeholder:"••••••••",value:f,onChange:s=>x(s.target.value),required:!0,minLength:6})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(i,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsx(o,{id:"confirm-password",type:"password",placeholder:"••••••••",value:v,onChange:s=>g(s.target.value),required:!0,minLength:6})]}),s.jsxs(t,{type:"submit",className:"w-full",disabled:w,children:[w&&s.jsx(h,{className:"mr-2 h-4 w-4 animate-spin"}),"Reset Password"]})]})})]})})})};export{w as default};
